(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{273:function(e,t,o){var content=o(281);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(27).default)("0f968045",content,!0,{sourceMap:!1})},274:function(e,t,o){var content=o(284);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(27).default)("1ff3331c",content,!0,{sourceMap:!1})},280:function(e,t,o){"use strict";var n=o(273);o.n(n).a},281:function(e,t,o){(t=o(26)(!1)).push([e.i,".seek-container[data-v-7452cc69]{position:relative}",""]),e.exports=t},283:function(e,t,o){"use strict";var n=o(274);o.n(n).a},284:function(e,t,o){(t=o(26)(!1)).push([e.i,".align{float:left;margin:0}.align,.streamed-image{position:absolute;display:block}.streamed-image{z-index:-100;pointer-events:none;max-width:80vw;max-height:100vh;width:auto;height:auto}.moveable{font-family:Roboto,sans-serif;position:absolute;width:100px;height:100px;left:0;top:0;text-align:center;font-size:40px;margin:0;font-weight:100;letter-spacing:1px}.moveable-control,.moveable-line{border-color:#1e9ecb!important;background:#20a8d8!important}.moveable-line{visibility:hidden!important}.moveable-control.moveable-rotation{border-color:#1e9ecb!important;background:#ade1f3!important}.moveable-direction,.moveable-rotation-line{visibility:visible!important;outline:1px solid transparent!important}",""]),e.exports=t},289:function(e,t,o){"use strict";o.r(t);var n=o(20),r=(o(11),o(279)),l={name:"seek",props:{id:{type:String,default:""},debounce:{type:Number,default:100},position:{type:Number,default:.5},callback:{type:Function,default:void 0}},components:{vuescroll:r.a},mounted:function(){console.log("Seeking to middle of file"),Object(n.k)(this.id,this.position)},methods:{handleScroll:function(e,t){var o=this;console.log("Seeking to ".concat(t)),Object(n.k)(id,t).then((function(e){o.position=e})),void 0!==this.callback&&this.callback()}}},c=(o(280),o(13)),d=Object(c.a)(l,(function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"scroll",rawName:"v-scroll:debounce",value:{fn:this.handleScroll,debounce:this.debounce},expression:"{ fn: handleScroll, debounce: debounce }",arg:"debounce"}],staticClass:"seek-container"},[this._t("default")],2)}),[],!1,null,"7452cc69",null).exports,m=o(282),f=o.n(m),h=o(114),v={name:"align",beforeMount:function(){window.onresize=this.updateFrame,this.handleInit(),setInterval(this.updateRoiCoordinates,100)},components:{SeekContainer:d,Moveable:f.a},methods:{handleInit:function(){var e=this;console.log("Initializing align window for ".concat(this.id)),this.$store.dispatch("align/init",{id:this.id}).then((function(){console.log("Vuex/align: init should be done"),console.log(e.$store.state.align),null===e.$store.getters["align/getInitialRoi"](e.id)&&e.$store.commit("align/setInitialRoi",{id:e.id,initial_roi:h.a})}))},handleTransform:function(e){var t=e.target,o=e.transform;t.style.transform=o},handleRotate:function(e){var t=e.target,o=e.transform;t.style.transform=o},updateRoiCoordinates:function(){var e=this.$store.getters["align/getFrame"](this.id),t=Object(h.c)(this.$refs.moveable.getRect(),e);Object(n.d)(this.id,t)},updateFrame:function(){var e=this;console.log("Updating frame...");var t=this.$refs.frame.getBoundingClientRect();console.log(t),this.moveable.bounds=t,this.$store.commit("align/setFrame",{id:this.id,frame:t}),this.$store.dispatch("align/getRoi",{id:this.id}).then((function(){var t=e.$store.getters["align/getInitialTransform"](e.id);e.$refs.moveable.$el.style.transform=t,console.log("updateFrame - initial_transform"),console.log(t),console.log(e.$refs.moveable.$el),e.$refs.moveable.updateRect(),e.$refs.moveable.updateTarget()}))}},computed:{id:function(){return this.$route.query.id},stream_url:function(){return Object(n.n)(this.$route.query.id,"stream/get_inverse_overlaid_frame")},initial_coordinates:function(){return{}}},data:function(){return{moveable:{draggable:!0,throttleDrag:0,rotatable:!0,throttleRotate:0,warpable:!0,throttleWarp:0,snappable:!0,bounds:{}}}}},$=(o(283),Object(c.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fixed-page"},[o("seek-container",{attrs:{id:e.id,callback:e.updateFrame}},[o("div",{ref:"align",staticClass:"align"},[o("img",{ref:"frame",staticClass:"streamed-image",attrs:{src:e.stream_url,alt:""}}),e._v(" "),o("Moveable",e._b({ref:"moveable",staticClass:"moveable",on:{drag:e.handleTransform,scale:e.handleTransform,rotate:e.handleRotate,warp:e.handleTransform}},"Moveable",e.moveable,!1))],1)]),e._v(" "),o("div",{staticClass:"controls"})],1)}),[],!1,null,null,null));t.default=$.exports}}]);