(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{276:function(t,e,n){var content=n(281);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("0a18e831",content,!0,{sourceMap:!1})},277:function(t,e,n){var content=n(283);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("20035751",content,!0,{sourceMap:!1})},278:function(t,e,n){"use strict";var r={name:"PageHeaderItem"},o=(n(280),n(15)),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"page-header-item"},[this._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},279:function(t,e,n){var content=n(287);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("cda4275e",content,!0,{sourceMap:!1})},280:function(t,e,n){"use strict";var r=n(276);n.n(r).a},281:function(t,e,n){(e=n(27)(!1)).push([t.i,".page-header-item{flex:0 1 auto;margin-bottom:7px;margin-top:8px;background:#c2cfd6;display:block;padding-left:.5rem;overflow:visible;height:38.133px;min-height:38.133px;max-height:38.133px;min-width:20px}.page-header-item .btn{height:38.133px}.page-header-item .slider-container{height:38.133px;max-height:38.133px}.page-header-item .dropdown-item{background-color:#f0f3f5}",""]),t.exports=e},282:function(t,e,n){"use strict";var r=n(277);n.n(r).a},283:function(t,e,n){(e=n(27)(!1)).push([t.i,".page-header{flex-grow:0!important;flex-shrink:0!important;height:53.133px!important;margin-bottom:0!important;border-bottom:0!important;border-radius:0!important;width:calc(100vw - 160px);display:flex;flex-direction:row;background:#c2cfd6;overflow:visib}",""]),t.exports=e},284:function(t,e,n){"use strict";var r={name:"PageHeader",props:{},components:{PageHeaderItem:n(278).a},methods:{}},o=(n(282),n(15)),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"page-header"},[this._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},286:function(t,e,n){"use strict";var r=n(279);n.n(r).a},287:function(t,e,n){(e=n(27)(!1)).push([t.i,".vue-slider{padding:4px}.vue-slider-rail{background:#f0f3f5!important}.vue-slider-dot{background:#1985ac;border-radius:50%}.slider-container{display:flex;flex-direction:column;padding-left:4px;padding-right:4px}.slider-caption{height:14px;margin-bottom:4px}",""]),t.exports=e},288:function(t,e,n){"use strict";var r=n(290),o=n.n(r),l=n(278),c=n(18),d=n(285),f={name:"PageHeaderSeek",props:{id:{type:String,default:"",required:!0}},components:{VueSlider:o.a,PageHeaderItem:l.a},beforeMount:function(){this.setSeekPosition(.5),this.updatePosition=setInterval(1e3,this.getSeekPosition)},beforeDestroy:function(){clearInterval(this.updatePosition)},methods:{setSeekPosition:function(){var t=this;Object(c.p)(this.id,this.position).then((function(e){t.position=e}))},getSeekPosition:function(){var t=this;Object(c.j)(this.id).then((function(e){t.position=e}))},handleSeek:Object(d.b)(100,!0,Object(d.a)(25,!0,(function(){this.setSeekPosition()}))),formatTooltip:function(t){return"".concat(Math.round(100*t),"%")}},data:function(){return{position:null,options:{dotSize:14,width:120,height:4,contained:!1,direction:"ltr",data:null,min:0,max:1,interval:.01,disabled:!1,clickable:!1,duration:.1,adsorb:!1,lazy:!1,tooltip:"active",tooltipPlacement:"bottom",tooltipFormatter:this.formatTooltip,useKeyboard:!0,keydownHook:null,dragOnClick:!1,enableCross:!0,fixed:!1,order:!0,marks:!1,process:!1}}}},h=(n(286),n(15)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PageHeaderItem",[n("div",{staticClass:"slider-container"},[n("div",{staticClass:"slider-caption"},[t._v("Seek position")]),t._v(" "),n("vue-slider",t._b({ref:"slider",on:{change:t.handleSeek},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}},"vue-slider",t.options,!1))],1)])}),[],!1,null,null,null);e.a=component.exports},293:function(t,e,n){var content=n(303);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("45a71ca0",content,!0,{sourceMap:!1})},302:function(t,e,n){"use strict";var r=n(293);n.n(r).a},303:function(t,e,n){(e=n(27)(!1)).push([t.i,".filter{float:left;margin:0}.filter,.streamed-image-f{position:absolute;display:block;max-height:calc(100vh - 53.133px)}.streamed-image-f{z-index:100;max-width:calc(100vw - 160px);width:auto;height:auto}.overlay{mix-blend-mode:multiply}.hidden *{visibility:hidden}",""]),t.exports=e},309:function(t,e,n){"use strict";n.r(e);var r=n(18),o=n(284),l=n(278),c=n(288),d={name:"filter",beforeMount:function(){this.initFilter(),this.waitUntilHasRect=setInterval(this.updateFrameOnceHasRect,100)},beforeDestroy:function(){clearInterval(this.waitUntilHasRect),clearInterval(this.updateCall)},components:{PageHeader:o.a,PageHeaderItem:l.a,PageHeaderSeek:c.a},methods:{initFilter:function(){var t=this;Object(r.h)("feature").then((function(e){t.feature_options=e})),Object(r.h)("filter").then((function(e){t.filter_options=e})),this.masks=this.$store.getters["analyzers/getMasks"](this.id),this.mask=this.masks[0],this.filter=this.$store.getters["analyzers/getFilterType"](this.id,0),this.feature=this.$store.getters["analyzers/getFeatures"](this.id)[0],console.log("setting this.feature to ".concat(this.feature)),this.$store.dispatch("filter/init",{id:this.id})},updateFrame:function(){console.log("Updating frame...");var t=this.$refs.frame.getBoundingClientRect();console.log(t),this.$store.commit("filter/setFrame",{id:this.id,frame:t})},updateFrameOnceHasRect:function(){var t=!1;void 0!==this.waitUntilHasRect&&this.$refs.frame.getBoundingClientRect().width>50&&(console.log("HAS FRAME"),this.updateFrame(),t=!0),t&&clearInterval(this.waitUntilHasRect)},handleClick:function(t){this.$store.dispatch("filter/set",{id:this.id,event:t})},handleAnalyze:function(){Object(r.b)(this.id)},handleSetFeature:function(t){var e=this;this.$store.dispatch("analyzers/set_config",{id:this.id,config:{features:[t]}}).then((function(t){console.log("in analyzers/set_config callback");var n=e.$store.getters["analyzers/getFeatures"](e.id);e.feature=n[0]}))},handleSetMask:function(mask,t){this.mask=mask,this.filter=this.$store.getters["analyzers/getFilterType"](this.id,t),this.filter_data=this.$store.getters["analyzers/getFilterData"](this.id,t)},handleSetFilter:function(filter){var t=this,e=this.$store.getters["analyzers/getConfig"](this.id);e.masks[this.mask].filter.type=filter,this.$store.dispatch("analyzers/set_config",{id:this.id,config:e}).then((function(){t.filter=t.$store.getters["analyzers/getFilterType"](t.id)}))}},computed:{id:function(){return this.$route.query.id},state_url:function(){return Object(r.u)(this.$route.query.id,"stream/get_state_frame")},frame_url:function(){return Object(r.u)(this.$route.query.id,"stream/get_frame")}},data:function(){return{waitUntilHasRect:null,feature:"",feature_options:{},filter:"",filter_options:{},filter_data:{},mask:"",masks:{}}}},f=(n(302),n(15)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fixed-page"},[n("PageHeader",[n("PageHeaderItem",[n("b-button",{on:{click:t.handleAnalyze}},[t._v("Analyze")])],1),t._v(" "),n("PageHeaderSeek",{attrs:{id:t.id}}),t._v(" "),n("PageHeaderItem",[n("b-button-group",[n("b-dropdown",{attrs:{text:""+this.feature,"data-toggle":"tooltip",title:"Feature type"}},t._l(t.feature_options,(function(e){return n("b-dropdown-item",{key:"feature-"+e,on:{click:function(n){return t.handleSetFeature(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])})),1)],1)],1),t._v(" "),n("PageHeaderItem",[n("b-button-group",[n("b-dropdown",{attrs:{text:""+this.mask,"data-toggle":"tooltip",title:"Mask"}},t._l(t.masks,(function(mask,e){return n("b-dropdown-item",{key:"mask-"+mask,on:{click:function(n){return t.handleSetMask(mask,e)}}},[t._v("\n            "+t._s(mask)+"\n          ")])})),1),t._v(" "),n("b-dropdown",{attrs:{text:""+this.filter,"data-toggle":"tooltip",title:"Filter type"}},t._l(t.filter_options,(function(filter){return n("b-dropdown-item",{key:"filter-"+filter,on:{click:function(e){return t.handleSetFilter(filter)}}},[t._v("\n            "+t._s(filter)+"\n          ")])})),1)],1)],1)],1),t._v(" "),n("div",{staticClass:"filter"},[n("img",{staticClass:"streamed-image-f",attrs:{src:t.frame_url,alt:""}}),t._v(" "),n("img",{ref:"frame",staticClass:"streamed-image-f overlay",attrs:{src:t.state_url,alt:""},on:{click:t.handleClick}})]),t._v(" "),n("div",{staticClass:"controls"})],1)}),[],!1,null,null,null);e.default=component.exports}}]);