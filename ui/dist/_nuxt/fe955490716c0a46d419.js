/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{550:function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},r.p="",r(r.s="fb15")}({8875:function(t,e,r){var n,o,c;"undefined"!=typeof self&&self,o=[],void 0===(c="function"==typeof(n=function(){return function(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(f){var t,e,r,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(f.stack)||/@([^@]*):(\d+):(\d+)\s*$/gi.exec(f.stack),o=n&&n[1]||!1,line=n&&n[2]||!1,c=document.location.href.replace(document.location.hash,""),l=document.getElementsByTagName("script");o===c&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(line-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=t.replace(e,"$1").trim());for(var i=0;i<l.length;i++){if("interactive"===l[i].readyState)return l[i];if(l[i].src===o)return l[i];if(o===c&&l[i].innerHTML&&l[i].innerHTML.trim()===r)return l[i]}return null}}})?n.apply(e,o):n)||(t.exports=c)},fb15:function(t,e,r){"use strict";if(r.r(e),"undefined"!=typeof window){var n=window.document.currentScript,o=r("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var c=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(r.p=c[1])}function l(t){return void 0===t}var f=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var r=this._eventHandler[t]||[],n=r.length>0;if(!n)return!0;r=r.concat(),e.eventType=t;var o=!1,c=[e],i=0;e.stop=function(){o=!0},e.currentTarget=this;for(var l=arguments.length,f=new Array(l>2?l-2:0),h=2;h<l;h++)f[h-2]=arguments[h];for(f.length>=1&&(c=c.concat(f)),i=0;r[i];i++)r[i].apply(this,c);return!o},e.once=function(t,e){if("object"==typeof t&&l(e)){var i,r=t;for(i in r)this.once(i,r[i]);return this}if("string"==typeof t&&"function"==typeof e){var n=this;this.on(t,(function r(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];e.apply(n,c),n.off(t,r)}))}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&l(e)){var r,n=t;for(r in n)this.on(r,n[r]);return this}if("string"==typeof t&&"function"==typeof e){var o=this._eventHandler[t];l(o)&&(this._eventHandler[t]=[],o=this._eventHandler[t]),o.push(e)}return this},e.off=function(t,e){if(l(t))return this._eventHandler={},this;if(l(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var r,n=t;for(r in n)this.off(r,n[r]);return this}var o,c,f=this._eventHandler[t];if(f)for(o=0;void 0!==(c=f[o]);o++)if(c===e){f=f.splice(o,1);break}return this},t}();return t.VERSION="2.1.2",t}();function h(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function d(t,e){return function(r){r&&(t[e]=r)}}function v(t,e,i){return function(r){r&&(t[e][i]=r)}}function m(t,e){return function(component){var r=component.prototype;t.forEach((function(t){e(r,t)}))}}var y=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,n=this.values,o=r.indexOf(t),c=-1===o?r.length:o;r[c]=t,n[c]=e},t}(),x=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),E="function"==typeof Map,S=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var link=this,t=-1;link;)link=link.prev,++t;return t},t}();var M=function(){function t(t,e,r,n,o,c,l,f){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=o,this.maintained=c,this.changedBeforeAdded=l,this.fixed=f}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var r=[],n=[];return t.forEach((function(t){var e=t[0],o=t[1],link=new S;r[e]=link,n[o]=link})),r.forEach((function(link,i){link.connect(r[i-1])})),t.filter((function(t,i){return!e[i]})).map((function(t,i){var e=t[0],o=t[1];if(e===o)return[0,0];var c=r[e],l=n[o-1],f=c.getIndex();return c.disconnect(),l?c.connect(l,l.next):c.connect(void 0,r[0]),[f,c.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,r=[];this.cacheOrdered=t.filter((function(t,i){var n=t[0],o=t[1],c=e[i],l=c[0],f=c[1];if(n!==o)return r.push([l,f]),!0})),this.cachePureChanged=r},t}();function w(t,e,r){var n=E?Map:r?x:y,o=r||function(t){return t},c=[],l=[],f=[],h=t.map(o),d=e.map(o),v=new n,m=new n,S=[],w=[],D={},C=[],O=0,P=0;return h.forEach((function(t,e){v.set(t,e)})),d.forEach((function(t,e){m.set(t,e)})),h.forEach((function(t,e){var r=m.get(t);void 0===r?(++P,l.push(e)):D[r]=P})),d.forEach((function(t,e){var r=v.get(t);void 0===r?(c.push(e),++O):(f.push([r,e]),P=D[e]||0,S.push([r-P,e-O]),w.push(e===r),r!==e&&C.push([r,e]))})),l.reverse(),new M(t,e,c,l,C,f,S,w)}var D=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),r=w(this.list,e,this.findKeyCallback);return this.list=e,r},t}(),C=("undefined"!=typeof document&&document,['"',"'",'\\"',"\\'"]);function O(t){return void 0===t}function P(t){return t&&"object"==typeof t}function R(t){return Array.isArray(t)}function z(t){return"string"==typeof t}function B(t,e,r,n){for(var i=r;i<n;++i){var o=e[i].trim();if(o===t)return i;var c=i;if("("===o?c=B(")",e,i+1,n):C.indexOf(o)>-1&&(c=B(o,e,i+1,n)),-1===c)break;i=c}return-1}function _(text,t){for(var e=new RegExp("(\\s*"+(t||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=text.split(e).filter(Boolean),n=r.length,o=[],c=[],i=0;i<n;++i){var l=r[i].trim(),f=i;if("("===l)f=B(")",r,i+1,n);else{if(")"===l)throw new Error("invalid format");if(C.indexOf(l)>-1)f=B(l,r,i+1,n);else if(l===t){c.length&&(o.push(c.join("")),c=[]);continue}}-1===f&&(f=n-1),c.push(r.slice(i,f+1).join("")),i=f}return c.length&&o.push(c.join("")),o}function T(text){return _(text,",")}function G(text){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(text);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function A(text){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(text);if(!t)return{prefix:"",unit:"",value:NaN};var e=t[1],r=t[2];return{prefix:e,unit:t[3],value:parseFloat(r)}}function N(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,r,n){return""+r+e+n.toLowerCase()}))}function j(){return Date.now?Date.now():(new Date).getTime()}function I(t,e,r){void 0===r&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}function k(element,t){return element.classList?element.classList.contains(t):!!element.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function W(t,e,r,n){t.addEventListener(e,r,n)}function X(t,e,r){t.removeEventListener(e,r)}var Y=function(t,b){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function H(t,b){function e(){this.constructor=t}Y(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var L=function(){return(L=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function F(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function V(a,b){if(a===b)return!1;for(var i in a)if(!(i in b))return!0;for(var i in b)if(a[i]!==b[i])return!0;return!1}function U(a,b){var t=Object.keys(a),e=Object.keys(b),r=w(t,e,(function(t){return t})),n={},o={},c={};return r.added.forEach((function(t){var r=e[t];n[r]=b[r]})),r.removed.forEach((function(e){var r=t[e];o[r]=a[r]})),r.maintained.forEach((function(e){var r=e[0],n=t[r],o=[a[n],b[n]];a[n]!==b[n]&&(c[n]=o)})),{added:n,removed:o,changed:c}}function $(t){t.forEach((function(t){t()}))}function K(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function Z(t,e,r,n){return z(t)?new ot("text_"+t,e,r,n,null,{}):new("string"==typeof t.type?at:t.type.prototype.render?lt:ut)(t.type,e,r,n,t.ref,t.props)}function J(t){var e=[];return t.forEach((function(t){e=e.concat(R(t)?J(t):t)})),e}function Q(t){var e=t.className,r=F(t,["className"]);return null!=e&&(r.class=e),delete r.style,delete r.children,r}function tt(t,e){if(!e)return t;for(var r in e)O(t[r])&&(t[r]=e[r]);return t}function et(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=e||{},c=o.key,l=o.ref,f=F(o,["key","ref"]);return{type:t,key:c,ref:l,props:L(L({},f),{children:J(r).filter((function(t){return null!=t&&!1!==t}))})}}var nt=function(){function t(t,e,r,n,o,c){void 0===c&&(c={}),this.type=t,this.key=e,this.index=r,this.container=n,this.ref=o,this.props=c,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,r,n){if(this.base&&!z(e)&&!n&&!this._should(e.props,r))return!1;this.original=e,this._setState(r);var o=this.props;return z(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?o:{},r),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function it(t){var e={},r={};for(var n in t)0===n.indexOf("on")?r[n.replace("on","").toLowerCase()]=t[n]:e[n]=t[n];return{attributes:e,events:r}}var ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var r=e.prototype;return r._render=function(t){var e=this,r=!this.base;return r&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){r?e._mounted():e._updated()})),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(nt),at=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e}H(e,t);var r=e.prototype;return r.addEventListener=function(t,e){var r=this.events;r[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,r[t])},r.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},r._should=function(t){return V(this.props,t)},r._render=function(t,e){var r=this,n=!this.base;n&&(this.base=document.createElement(this.type)),vt(this,this._providers,this.props.children,t,null);var base=this.base,o=it(e),c=o.attributes,l=o.events,f=it(this.props),h=f.attributes,d=f.events;return function(t,e,r){var n=U(t,e),o=n.added,c=n.removed,l=n.changed;for(var f in o)r.setAttribute(f,o[f]);for(var f in l)r.setAttribute(f,l[f][1]);for(var f in c)r.removeAttribute(f)}(Q(c),Q(h),base),function(t,e,r){var n=U(t,e),o=n.added,c=n.removed,l=n.changed;for(var f in c)r.removeEventListener(f);for(var f in o)r.addEventListener(f,o[f]);for(var f in l)r.removeEventListener(f),r.addEventListener(f,l[f][1]);for(var f in c)r.removeEventListener(f)}(l,d,this),function(t,e,r){var style=r.style,n=U(t,e),o=n.added,c=n.removed,l=n.changed;for(var f in o){var h=N(f,"-");style.setProperty?style.setProperty(h,o[f]):style[h]=o[f]}for(var f in l){h=N(f,"-");style.setProperty?style.setProperty(h,l[f][1]):style[h]=l[f][1]}for(var f in c){h=N(f,"-");style.removeProperty?style.removeProperty(h):style[h]=""}}(e.style||{},this.props.style||{},base),t.push((function(){n?r._mounted():r._updated()})),!0},r._unmount=function(){var t=this.events,base=this.base;for(var e in t)base.removeEventListener(e,t[e]);this._providers.forEach((function(t){t._unmount()})),this.events={},base.parentNode.removeChild(base)},e}(nt);function st(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?st(e[0].base):null}var ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var r=e.prototype;return r._render=function(t){var template=this.type(this.props);return vt(this,this._providers,template?[template]:[],t),!0},r._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(nt),ct=function(t){function e(base){var e=t.call(this,"container","container",0,null)||this;return e.base=base,e}H(e,t);var r=e.prototype;return r._render=function(){return!0},r._unmount=function(){},e}(nt),lt=function(t){function e(e,r,n,o,c,l){return void 0===l&&(l={}),t.call(this,e,r,n,o,c,tt(l,e.defaultProps))||this}H(e,t);var r=e.prototype;return r._should=function(t,e){return this.base.shouldComponentUpdate(tt(t,this.type.defaultProps),e||this.base.state)},r._render=function(t,e,r){var n=this;this.props=tt(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var base=this.base,c=base.state,template=base.render();template&&template.props&&!template.props.children.length&&(template.props.children=this.props.children),vt(this,this._providers,template?[template]:[],t,r,null),t.push((function(){o?(n._mounted(),base.componentDidMount()):(n._updated(),base.componentDidUpdate(e,c))}))},r._setState=function(t){t&&(this.base.state=t)},r._unmount=function(){this._providers.forEach((function(t){t._unmount()})),this.base.componentWillUnmount()},e}(nt),ft=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,r){var n=[],o=this._provider;vt(o.container,[o],[o.original],n,L(L({},this.state),t),r)&&(e&&n.push(e),$(n))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.shouldComponentUpdate=function(t,e){return V(this.props,t)||V(this.state,e)},e}(ft),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var r=e.prototype;return r.componentDidMount=function(){var t=this.props,element=t.element,e=t.container;this._portalProvider=new ct(e),mt(element,e,this._portalProvider)},r.componentDidUpdate=function(){var t=this.props;mt(t.element,t.container,this._portalProvider)},r.componentWillUnmount=function(){mt(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(pt);function gt(t,e,r){var n=r.map((function(p){return z(p)?null:p.key})),o=w(K(e.map((function(p){return p.key}))),K(n),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var r=t[0],n=t[1],o=e.splice(r,1)[0];e.splice(n,0,o);var c=st(o.base),l=st(e[n+1]&&e[n+1].base);c&&c.parentNode.insertBefore(c,l)})),o.added.forEach((function(o){e.splice(o,0,Z(r[o],n[o],o,t))}));var c=o.maintained.filter((function(o){o[0];var c=o[1],l=r[c],f=e[c];return(z(l)?"text_"+l:l.type)!==f.type?(f._unmount(),e.splice(c,1,Z(l,n[c],c,t)),!0):(f.index=c,!1)}));return function(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),r=0;for(i=0;i<t;i++)for(var a=arguments[i],n=0,o=a.length;n<o;n++,r++)e[r]=a[n];return e}(o.added,c.map((function(t){t[0];return t[1]})))}function vt(t,e,r,n,o,c){var l=gt(t,e,r),f=e.filter((function(t,i){return t._update(n,r[i],o,c)})),h=function t(e){if(!e)return null;var base=e.base;return base instanceof Node?base:t(e.container)}(t);return h&&l.reverse().forEach((function(r){var n=e[r],o=st(n.base);if(o&&h!==o&&!o.parentNode){var c=function(t,e){for(var r=t._providers,n=r.length,i=e.index+1;i<n;++i){var o=st(r[i].base);if(o)return o}return null}(t,n);h.insertBefore(o,c)}})),f.length>0}function mt(element,t,e){void 0===e&&(e=t.__REACT_COMPAT__);var r=!!e;return e||(e=new ct(t)),function(t,e,r){var n=[];vt(t,t._providers,e,n,r),$(n)}(e,element?[element]:[]),r||(t.__REACT_COMPAT__=e),e}function bt(element,t,e){var r=t.__REACT_COMPAT__;element&&!r&&(t.innerHTML=""),mt(element,t,r),e&&e()}var yt="undefined"!=typeof window&&window||{},xt=(yt.RegExp,yt.navigator),Et=[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],St=[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],Mt=[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],wt={browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}};function filter(t,e){for(var r=[],i=0;i<t.length;i++)e(t[i])&&r.push(t[i]);return r}var Dt=void 0;function Ct(t){Dt=t}function Ot(base,t){return t&&t.test?!!t.test(base):base.indexOf(t)>-1}function Pt(t,e){var r=filter(t,(function(t){return Ot(Dt,t.criteria)}))[0];return r&&r.identity||e.name}function Rt(t,e){return filter(t,(function(t){var r=t.criteria,n=new RegExp(t.identity,"i").test(e);return!!(r?n&&Ot(Dt,r):n)}))[0]}function zt(t,e){var r=wt.browser.version,n=new RegExp("("+t+")","i").exec(e);if(!n)return r;var o=n.index,c=n[0];if(o>-1){var l=o+c.length+1;r=e.substring(l).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return r}function Bt(t){if(t)return zt(function(t){var e=Rt(Et,t);return e||(e={criteria:t,versionSearch:t,identity:t}),e}(t).versionSearch||t,Dt)}function _t(t){var e=function(t){return Rt(St,t)}(t)||{},r=wt.os.version,n=void 0;if(t){if(e.versionAlias)return e.versionAlias;var o=e.versionSearch||t,c=new RegExp("("+o+")\\s([\\d_\\.]+|\\d_0)","i");return c.exec(Dt)&&(n=c.exec(Dt)[2].replace(/_/g,".").replace(/;|\)/g,"")),n||r}}function Tt(){var t=Pt(St,wt.os);return{name:t,version:_t(t)}}function Gt(){var t,e=Pt(Et,wt.browser);return{name:e,version:Bt(e),webview:(t=void 0,function(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return!0;return!1}(filter(Mt,(function(t){return Ot(Dt,t.criteria)})),(function(e){return t=zt(e.browserVersionSearch,Dt),!(!Ot(Dt,e.webviewToken)&&!Ot(t,e.webviewBrowserVersion))})))}}function At(){return-1!==Dt.indexOf("Mobi")}function Nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt.userAgent;Ct(t);var e={os:Tt(),browser:Gt(),isMobile:At()};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}Nt.VERSION="2.1.5";var jt=Nt;function It(t,e,r,n,o,c){for(var i=r;i<n;++i)t[i]+=t[o+i-r]*c,e[i]+=e[o+i-r]*c}function kt(t,e,r,n,o){for(var i=r;i<n;++i){var c=t[i],l=e[i];t[i]=t[o+i-r],t[o+i-r]=c,e[i]=e[o+i-r],e[o+i-r]=l}}function Wt(t,e,r,n,o){for(var i=r;i<n;++i)t[i]/=o,e[i]/=o}function Xt(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}function Yt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=ne(e),i=0;i<e;++i){var o=e*i,c=e*(i+1),l=o+i;if(0===r[l])for(var f=i+1;f<e;++f)if(r[e*f+i]){kt(r,n,o,c,e*f);break}if(!r[l])return[];Wt(r,n,o,c,r[l]);for(f=0;f<e;++f){var h=e*f,d=h+e,v=r[h+i];0!==v&&i!==f&&It(r,n,h,d,o,-v)}}return n}function Ht(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],i=0;i<e;++i)for(var n=0;n<e;++n)r[n*e+i]=t[e*i+n];return r}function Lt(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=Math.atan2(n,r);return o>=0?o:o+2*Math.PI}function qt(t,e){for(var r=t.slice(),i=t.length;i<e-1;++i)r[i]=0;return r[e-1]=1,r}function Ft(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=ne(r),o=Math.min(e,r),i=0;i<o-1;++i){for(var c=0;c<o-1;++c)n[i*r+c]=t[i*e+c];n[(i+1)*r-1]=t[(i+1)*e-1],n[(r-1)*r+i]=t[(e-1)*e+i]}return n[r*r-1]=t[e*e-1],n}function Vt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=ne(t);return e.forEach((function(e){n=Ut(n,e,t)})),n}function Ut(t,e,r){var n=[],o=t.length/r,c=e.length/o;if(!o)return e;if(!c)return t;for(var i=0;i<r;++i)for(var l=0;l<c;++l){n[i*c+l]=0;for(var f=0;f<o;++f)n[i*c+l]+=t[i*o+f]*e[f*c+l]}return n}function $t(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=[],o=t.length/r,c=e.length/o,i=0;i<r;++i)for(var l=0;l<c;++l){n[i+l*c]=0;for(var f=0;f<o;++f)n[i+l*c]+=t[i+f*o]*e[f+l*c]}return n}function Kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length,n=0,i=r-1;i>=0;--i)n+=t[i];return r?n/r:0}function Zt(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function Jt(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function Qt(t,e,r){void 0===r&&(r=e.length);var n=Ut(t,e,r),o=n[r-1];return n.map((function(t){return t/o}))}function te(t,e){return Qt(re(e,3),qt(t,3))}function ee(a){return 9===a.length?[a[0],a[3],a[1],a[4],a[2],a[5]]:Ht(a)}function re(t,e){var r=Math.cos(t),n=Math.sin(t),o=ne(e);return o[0]=r,o[1]=-n,o[e]=n,o[e+1]=r,o}function ne(t){for(var e=t*t,r=[],i=0;i<e;++i)r[i]=i%(t+1)?0:1;return r}function ie(t,e){for(var r=ne(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function oe(t,e){for(var r=ne(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(i+1)-1]=t[i];return r}function ae(t,e,r,n,o,c,l,f){var h=t[0],d=t[1],v=e[0],m=e[1],y=r[0],x=r[1],E=n[0],S=n[1],M=o[0],w=o[1],D=c[0],C=c[1],O=l[0],P=l[1],R=f[0],z=f[1],B=Yt([h,d,1,0,0,0,-M*h,-M*d,0,0,0,h,d,1,-w*h,-w*d,v,m,1,0,0,0,-D*v,-D*m,0,0,0,v,m,1,-C*v,-C*m,y,x,1,0,0,0,-O*y,-O*x,0,0,0,y,x,1,-P*y,-P*x,E,S,1,0,0,0,-R*E,-R*S,0,0,0,E,S,1,-z*E,-z*S],8);if(!B.length)return[];var _=Ut(B,[M,w,D,C,O,P,R,z],8);return _[8]=1,Ft(_,3,4)}var se=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return e>>>0};var ue=function(t){var e,r="rCS"+se(t).toString(36),n=0;return{className:r,inject:function(o){var c,l=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(o),f=0===n;return(l||f)&&(c=function(t,e,r){var style=document.createElement("style");return style.setAttribute("type","text/css"),style.innerHTML=e.replace(/([^}{]*){/gm,(function(e,r){return T(r).map((function(e){return e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):"."+t+" "+e})).join(", ")+"{"})),(r||document.head||document.body).appendChild(style),style}(r,t,l)),f&&(e=c),l||++n,{destroy:function(){l?(o.removeChild(c),c=null):(n>0&&--n,0===n&&e&&(e.parentNode.removeChild(e),e=null))}}}}},ce=function(t,b){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};var le=function(){return(le=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};var fe=function(t,e){var r=ue(e);return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return function(t,b){function e(){this.constructor=t}ce(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}(n,e),n.prototype.render=function(){var e=this.props,n=e.className,o=void 0===n?"":n,c=function(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}(e,["className"]);return et(t,le({ref:d(this,"element"),className:o+" "+r.className},c))},n.prototype.componentDidMount=function(){this.injectResult=r.inject(this.element)},n.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.prototype.getElement=function(){return this.element},n}(ft)},pe=function(){return(pe=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function he(t,e,r,n){var o=xe(t),c=xe(e),l=xe(n);return ge(Ee(n[0],Se(o,l)),Ee(n[0],Se(c,l)),r[0])}function de(t){return t.touches?be(t.touches):[ye(t)]}function ge(t,e,r){var n=t.clientX,o=t.clientY;return{clientX:n,clientY:o,deltaX:n-e.clientX,deltaY:o-e.clientY,distX:n-r.clientX,distY:o-r.clientY}}function ve(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function me(t,e,r){return t.map((function(t,i){return ge(t,e[i],r[i])}))}function be(t){for(var e=Math.min(t.length,2),r=[],i=0;i<e;++i)r.push(ye(t[i]));return r}function ye(t){return{clientX:t.clientX,clientY:t.clientY}}function xe(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Ee(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Se(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Me=function(){function t(t,e){var r=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.onDragStart=function(t){if(r.flag||!1!==t.cancelable){var e=r.options,n=e.container,o=e.pinchOutside,c=e.dragstart,l=e.preventRightClick,f=e.preventDefault,h=r.isTouch;if(!r.flag&&h&&o&&setTimeout((function(){W(n,"touchstart",r.onDragStart)})),r.flag&&h&&o&&X(n,"touchstart",r.onDragStart),function(t){return t.touches&&t.touches.length>=2}(t)){if(!r.flag&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}if(!r.flag){var d=r.startClients[0]?r.startClients:de(t);r.customDist=[0,0],r.flag=!0,r.isDrag=!1,r.startClients=d,r.prevClients=d,r.datas={},r.movement=0;var v=ge(d[0],r.prevClients[0],r.startClients[0]);(l&&(3===t.which||2===t.button)||!1===(c&&c(pe({type:"dragstart",datas:r.datas,inputEvent:t},v))))&&(r.startClients=[],r.prevClients=[],r.flag=!1),r.isDouble=j()-r.prevTime<200,r.flag&&f&&t.preventDefault()}}},this.onDrag=function(t,e){if(r.flag){var n=de(t);r.pinchFlag&&r.onPinch(t,n);var o=r.move([0,0],t,n);if(o&&(o.deltaX||o.deltaY)){var c=r.options.drag;c&&c(pe({},o,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.dragend,o=e.pinchOutside,c=e.container;r.isTouch&&o&&X(c,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t),r.flag=!1;var l=r.prevClients,f=r.startClients,h=r.pinchFlag?he(l,l,f,r.startPinchClients):ge(l[0],l[0],f[0]),d=j(),v=!r.isDrag&&r.isDouble;r.prevTime=r.isDrag||v?0:d,r.startClients=[],r.prevClients=[],n&&n(pe({type:"dragend",datas:r.datas,isDouble:v,isDrag:r.isDrag,inputEvent:t},h))}};var n=[].concat(t);this.options=pe({container:n.length>1?window:n[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var o=this.options,c=o.container,l=o.events;if(this.isTouch=l.indexOf("touch")>-1,this.isMouse=l.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=n,this.isMouse&&(n.forEach((function(t){W(t,"mousedown",r.onDragStart)})),W(c,"mousemove",this.onDrag),W(c,"mouseup",this.onDragEnd),W(c,"contextmenu",this.onDragEnd)),this.isTouch){var f={passive:!1};n.forEach((function(t){W(t,"touchstart",r.onDragStart,f)})),W(c,"touchmove",this.onDrag,f),W(c,"touchend",this.onDragEnd,f),W(c,"touchcancel",this.onDragEnd,f)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,e,r,n){void 0===n&&(n=!0),this.flag&&(this.startClients.forEach((function(r){r.clientX-=t,r.clientY-=e})),this.prevClients.forEach((function(r){r.clientX-=t,r.clientY-=e})),n&&this.onDrag(r,!0))},e.move=function(t,e,r){var n=t[0],o=t[1];void 0===r&&(r=this.prevClients);var c=this.customDist,l=this.prevClients,f=this.startClients,h=this.pinchFlag?he(r,l,f,this.startPinchClients):ge(r[0],l[0],f[0]);c[0]+=n,c[1]+=o,h.deltaX+=n,h.deltaY+=o;var d=h.deltaX,v=h.deltaY;return h.distX+=c[0],h.distY+=c[1],this.movement+=Math.sqrt(d*d+v*v),this.prevClients=r,this.isDrag=!0,pe({type:"drag",datas:this.datas},h,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,r,n=this.options,o=n.pinchstart,c=n.pinchThreshold;if(!(this.isDrag&&this.movement>c)){var l=be(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,l),(r=this.prevClients).push.apply(r,l),this.startDistance=ve(this.prevClients),this.startPinchClients=this.prevClients.slice(),o){var f=this.prevClients,h=xe(f),d=ge(h,h,h);o(pe({type:"pinchstart",datas:this.datas,touches:me(f,f,f)},d,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var r=this.options.pinch;if(r){var n=this.prevClients,o=this.startClients,c=ge(xe(e),xe(n),xe(o)),l=ve(e);r(pe({type:"pinch",datas:this.datas,movement:this.movement,touches:me(e,n,o),scale:l/this.startDistance,distance:l},c,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.options.pinchend;if(r){var n=this.prevClients,o=this.startClients,c=ge(xe(n),xe(n),xe(o));r(pe({type:"pinchend",datas:this.datas,isPinch:e,touches:me(n,n,o)},c,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this,e=this.targets,r=this.options.container;this.isMouse&&(e.forEach((function(e){X(e,"mousedown",t.onDragStart)})),X(r,"mousemove",this.onDrag),X(r,"mouseup",this.onDragEnd),X(r,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){X(e,"touchstart",t.onDragStart)})),X(r,"touchstart",this.onDragStart),X(r,"touchmove",this.onDrag),X(r,"touchend",this.onDragEnd),X(r,"touchcancel",this.onDragEnd))},t}();var we=Me,De=function(t,b){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function Ce(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var Oe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startRect=null,e.startPos=[],e.prevTime=0,e.timer=0,e}!function(t,b){function e(){this.constructor=t}De(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}(e,t);var r=e.prototype;return r.dragStart=function(t,e){var r=e.container.getBoundingClientRect(),n=r.top,o=r.left,c=r.width,l=r.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:n,left:o,width:c,height:l}},r.drag=function(t,e){var r=this,n=t.clientX,o=t.clientY,c=e.container,l=e.threshold,f=void 0===l?0:l,h=e.throttleTime,d=void 0===h?0:h,v=e.getScrollPosition,m=void 0===v?Ce:v,y=this.startRect,x=this.startPos,E=j(),S=Math.max(d+this.prevTime-E,0),M=[0,0];if(y.top>o-f?(x[1]>y.top||o<x[1])&&(M[1]=-1):y.top+y.height<o+f&&(x[1]<y.top+y.height||o>x[1])&&(M[1]=1),y.left>n-f?(x[0]>y.left||n<x[0])&&(M[0]=-1):y.left+y.width<n+f&&(x[0]<y.left+y.width||n>x[0])&&(M[0]=1),clearTimeout(this.timer),!M[0]&&!M[1])return!1;if(S>0)return this.timer=window.setTimeout((function(){r.drag(t,e)}),S),!1;this.prevTime=E;var w=m({container:c,direction:M});this.trigger("scroll",{container:c,direction:M,inputEvent:t});var D=m({container:c,direction:M}),C=D[0]-w[0],O=D[1]-w[1];return!(!C&&!O)&&(this.trigger("move",{offsetX:M[0]?C:0,offsetY:M[1]?O:0,inputEvent:t}),d&&(this.timer=window.setTimeout((function(){r.drag(t,e)}),d)),!0)},r.dragEnd=function(){clearTimeout(this.timer)},e}(f),Pe=function(t,b){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};var Re,ze="function"==typeof Map?void 0:(Re=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Re)});var Be=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,ze)||this}return function(t,b){function e(){this.constructor=t}Pe(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}(e,t),e}(D),_e=function(t,b){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function Te(t,b){function e(){this.constructor=t}_e(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var Ge=function(){return(Ge=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function Ae(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var Ne=jt(),je=Ne.os.name.indexOf("ios")>-1||Ne.browser.name.indexOf("safari")>-1,Ie="moveable-",ke=function(t,e){return e.replace(/([^}{]*){/gm,(function(e,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(Ie,"\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=Ae(1,t),r=Ae(2,t),n=45*Math.round(t/45)%180,o=135===n?"nwse-resize":45===n?"nesw-resize":90===n?"ew-resize":"ns-resize";return"cursor:"+o+";cursor: url('"+e+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+r+"') 2x) 16 16, "+o+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n.control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: pointer;\n}\n"+(je?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n"),We=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Xe=Math.pow(10,10),Ye=-Xe,He=["nw","ne","sw","se","n","w","s","e"],Le={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},qe={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h.apply(void 0,[Ie].concat(t))}function Ve(){return ne(3)}function Ue(t,e,r){return Vt(e,oe(r,e),t,oe(r.map((function(a){return-a})),e))}function $e(t){return Ke(Or(t,":before")).map((function(e,i){var r=A(e),n=r.value,o=r.unit;return n*function(t,e,r){return"%"===e?rr(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,o,0===i)}))}function Ke(style){var t=style.transformOrigin;return t?t.split(" "):["0","0"]}function Ze(t,e,r){for(var body=document.body,n=!t||r?t:t.parentElement,o=!1,c="relative";n&&n!==body;){e===n&&(o=!0);var style=Or(n),l=style.transform;if("static"!==(c=style.position)||l&&"none"!==l)break;n=n.parentElement,c="relative"}return{isStatic:"static"===c,isEnd:o||!n||n===body,offsetParent:n||body}}function Je(t,e,style,r){var n,o=t.tagName.toLowerCase(),c=t.offsetLeft,l=t.offsetTop;if(r){var f=(e||document.documentElement).getBoundingClientRect();c-=f.left,l-=f.top}var h,d=O(c),v=!d;return v||"svg"===o?h=Ke(style).map((function(t){return parseFloat(t)})):(h=je?$e(t):Ke(style).map((function(t){return parseFloat(t)})),v=!0,"g"===o?(c=0,l=0):(c=(n=function(t,e){if(!t.getBBox)return[0,0];var r=t.getBBox(),n=rr(t.ownerSVGElement),o=r.x-n.x,c=r.y-n.y;return[o,c,e[0]-o,e[1]-c]}(t,h))[0],l=n[1],h[0]=n[2],h[1]=n[3])),{isSVG:d,hasOffset:v,offset:[c,l],origin:h}}function Qe(t,e,r){var n,o,a,c,l=t,f=[],h=!1,d=!1,v=3,m=Ze(e,e,!0).offsetParent;for(r&&(h=t===e,r.length>10&&(d=!0,v=4),e=t.parentElement);l&&!h;){var style=Or(l),y=l.tagName.toLowerCase(),x=style.position,E="fixed"===x,S=style.transform,M=6===(a=(c=S)&&"none"!==c?P(c)?c:G(c).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0]).length?[a[0],a[2],a[4],a[1],a[3],a[5],0,0,1]:Ht(a),w=M.length;if(!d&&16===w){d=!0,v=4;for(var D=f.length,i=0;i<D;++i)f[i]=Ft(f[i],3,4)}d&&9===w&&(M=Ft(M,3,4));var C=Je(l,e,style,E),O=C.hasOffset,R=C.isSVG,z=C.origin,B=C.offset,_=B[0],T=B[1];"svg"===y&&o&&f.push(nr(l,v),ne(v));var A=Ze(l,e),N=A.offsetParent,j=A.isEnd,I=A.isStatic;je&&O&&!R&&I&&"relative"===x&&(_-=N.offsetLeft,T-=N.offsetTop,h=h||j);var k=0,W=0;if(O&&m!==N&&(k=N.clientLeft,W=N.clientTop),f.push(Ue(M,v,z),oe(O?[_-l.scrollLeft+k,T-l.scrollTop+W]:[l,z],v)),o||(o=M),n||(n=z),h||E)break;l=N,h=j}return o||(o=ne(v)),n||(n=[0,0]),{offsetContainer:m,matrixes:f,targetMatrix:o,transformOrigin:n,is3d:d}}function er(t,e,r,n,o,c){var l=Qe(t,e,n),f=l.matrixes,h=l.is3d,d=l.targetMatrix,v=l.transformOrigin,m=Qe(l.offsetContainer,r,o),y=m.matrixes,x=m.is3d,E=x||h?4:3,S="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,M=e||document.body,w=n?Ft(n,c,E):ne(E),D=d,C=o?Ft(o,c,E):ne(E),O=n?Ft(n,c,E):ne(E),R=ne(E),z=f.length,B=Ze(M,M,!0).offsetParent;y.reverse(),f.reverse(),!h&&x&&(D=Ft(D,3,4),f.forEach((function(t,i){f[i]=Ft(t,3,4)}))),h&&!x&&y.forEach((function(t,i){y[i]=Ft(t,3,4)})),o||y.forEach((function(t){C=Ut(C,t,E)})),f.forEach((function(t,i){var e;z-2===i&&(O=w.slice()),z-1===i&&(R=w.slice()),P(t[E-1])&&(e=function(t,e,r,n,o,c){var l,f=pr(t),h=f[0],d=f[1],v=e.getBoundingClientRect(),rect=t.getBoundingClientRect(),m=rect.left-v.left+e.scrollLeft,y=rect.top-v.top+e.scrollTop,x=rect.width,E=rect.height,S=Vt(r,o,c),M=sr(S,h,d,r),w=M.left,D=M.top,C=M.width,O=M.height,P=ir(S,n,r),R=Jt(P,[w,D]),z=[m+R[0]*x/C,y+R[1]*E/O],B=[0,0],_=0;for(;++_<10;){var T=Yt(o,r);l=Jt(ir(T,z,r),ir(T,P,r)),B[0]=l[0],B[1]=l[1];var G=sr(Vt(r,o,oe(B,r),c),h,d,r),A=G.left,N=G.top,j=A-m,I=N-y;if(Math.abs(j)<2&&Math.abs(I)<2)break;z[0]-=j,z[1]-=I}return B.map((function(p){return Math.round(p)}))}(t[E-1],B,E,t[2*E-1],w,f[i+1]),t[E-1]=e[0],t[2*E-1]=e[1]),w=Ut(w,t,E)}));var _=!S&&h;D||(D=ne(_?4:3));var T=(_?"matrix3d":"matrix")+"("+ee(S&&16===D.length?Ft(D,4,3):D)+")";return[C=Xt(C,E,E),O,R,w,D,T,v,h||x]}function rr(t){var e=t.clientWidth,r=t.clientHeight,n=t.viewBox,o=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:o.x,y:o.y,width:o.width||e,height:o.height||r}}function nr(t,e){var r=t.clientWidth,n=t.clientHeight,o=rr(t),c=o.width,l=o.height,f=r/c,h=n/l,d=t.preserveAspectRatio.baseVal,v=d.align,m=d.meetOrSlice,y=[0,0],x=[f,h],E=[0,0];if(1!==v){var S=(v-2)%3,M=Math.floor((v-2)/3);y[0]=c*S/2,y[1]=l*M/2;var w=2===m?Math.max(h,f):Math.min(f,h);x[0]=w,x[1]=w,E[0]=(r-c)/2*S,E[1]=(n-l)/2*M}var D=ie(x,e);return D[e-1]=E[0],D[2*e-1]=E[1],Ue(D,e,y)}function ir(t,e,r){return Qt(t,qt(e,r),r)}function or(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map((function(e){return ir(t,e,n)}))}function ar(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]})),n=Math.min.apply(Math,e),o=Math.min.apply(Math,r),c=Math.max.apply(Math,e),l=Math.max.apply(Math,r);return{left:n,top:o,right:c,bottom:l,width:c-n,height:l-o}}function sr(t,e,r,n){return ar(or(t,e,r,n))}function ur(t,e,r,n){var o=16===t.length?4:3,c=or(t,r,n,o),l=c[0],f=l[0],h=l[1],d=c[1],v=d[0],m=d[1],y=c[2],x=y[0],E=y[1],S=c[3],M=S[0],w=S[1],D=ir(t,e,o),C=D[0],O=D[1],P=Math.min(f,v,x,M),R=Math.min(h,m,E,w),z=Math.max(f,v,x,M),B=Math.max(h,m,E,w);C=C-P||0,O=O-R||0;var _=[((f=f-P||0)+(v=v-P||0)+(x=x-P||0)+(M=M-P||0))/4,((h=h-R||0)+(m=m-R||0)+(E=E-R||0)+(w=w-R||0))/4],T=Lt(_,[f,h]),G=Lt(_,[v,m]);return[[P,R,z,B],[C,O],[[f,h],[v,m],[x,E],[M,w]],T<G&&G-T<Math.PI||T>G&&G-T<-Math.PI?1:-1]}function cr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function lr(t,e,r){void 0===r&&(r=Lt(t,e));var n=function(t,e){return cr([e[0]-t[0],e[1]-t[1]])}(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad)",width:n+"px"}}function fr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.length,o=e.reduce((function(t,e){return t+e[0]}),0)/n,c=e.reduce((function(t,e){return t+e[1]}),0)/n;return{transform:"translate("+o+"px, "+c+"px) rotate("+t+"rad)"}}function pr(t,style,e,r){void 0===style&&(style=window.getComputedStyle(t)),void 0===r&&(r=e||"border-box"===style.boxSizing);var n=t.offsetWidth,o=t.offsetHeight,c=!O(n);if((e||r)&&c)return[n,o];if(n=t.clientWidth,o=t.clientHeight,!c&&!n&&!o){var l=t.getBBox();return[l.width,l.height]}return e||r?[n+(parseFloat(style.borderLeftWidth)||0)+(parseFloat(style.borderRightWidth)||0),o+(parseFloat(style.borderTopWidth)||0)+(parseFloat(style.borderBottomWidth)||0)]:[n-(parseFloat(style.paddingLeft)||0)-(parseFloat(style.paddingRight)||0),o-(parseFloat(style.paddingTop)||0)-(parseFloat(style.paddingBottom)||0)]}function dr(t,e){return Lt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function gr(t,e,r,n,o,c){var l,f,h,d,v,m=0,y=0,x=0,E=0,S=[0,0],M=[[0,0],[0,0],[0,0],[0,0]],w=Ve(),D=Ve(),C=Ve(),P=Ve(),R=Ve(),z=0,B=0,_=[0,0],T=1,G=1,A=!1,N="",j=[0,0],I={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},k={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},W={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},X=0,Y=c?c.beforeMatrix:void 0,H=c?c.rootMatrix:void 0,L=c?c.is3d?4:3:void 0;if(e){if(c)z=c.width,B=c.height;else{var style=Or(e);z=e.offsetWidth,B=e.offsetHeight,O(z)&&(z=(l=pr(e,style,!0))[0],B=l[1])}w=(f=er(e,r,o,Y,H,L))[0],C=f[1],D=f[2],P=f[3],R=f[4],N=f[5],_=f[6],A=f[7],m=(d=(h=ur(P,_,z,B))[0])[0],y=d[1],x=d[2],E=d[3],S=h[1],M=h[2],T=h[3];var F;F=(v=ur(D,Zt(_,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],i=0;i<e-1;++i)r[i]=t[(i+1)*e-1];return r[e-1]=0,r}(R,A?4:3)),z,B))[0],j=v[1],G=v[3],j=[j[0]+F[0]-m,j[1]+F[1]-y],I=vr(e),k=vr(Ze(n,n,!0).offsetParent||document.body,!0),t&&(W=vr(t)),X=dr([M[0],M[1]],T)}return{rotation:X,targetClientRect:I,containerClientRect:k,moveableClientRect:W,beforeDirection:G,direction:T,target:e,left:m,top:y,right:x,bottom:E,pos1:M[0],pos2:M[1],pos3:M[2],pos4:M[3],width:z,height:B,rootMatrix:w,beforeMatrix:C,offsetMatrix:D,targetMatrix:R,matrix:P,targetTransform:N,is3d:A,beforeOrigin:j,origin:S,transformOrigin:_}}function vr(t,e){var r=t.getBoundingClientRect(),n=r.left,o=r.width,c=r.top,l=r.bottom,rect={left:n,right:r.right,top:c,bottom:l,width:o,height:r.height};return e&&(rect.clientLeft=t.clientLeft,rect.clientTop=t.clientTop,rect.clientWidth=t.clientWidth,rect.clientHeight=t.clientHeight,rect.scrollWidth=t.scrollWidth,rect.scrollHeight=t.scrollHeight),rect}function mr(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return e.indexOf("w")>-1&&(r[0]=-1),e.indexOf("e")>-1&&(r[0]=1),e.indexOf("n")>-1&&(r[1]=-1),e.indexOf("s")>-1&&(r[1]=1),r}}}function yr(t,e){return[Zt(e,t[0]),Zt(e,t[1]),Zt(e,t[2]),Zt(e,t[3])]}function xr(t){var e=t.left,r=t.top;return yr([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function Er(t,e){return e?Math.round(t/e)*e:t}function Sr(t,e){return t.forEach((function(r,i){t[i]=Er(t[i],e)})),t}function Mr(t,e){t[e]&&(t[e].unset(),t[e]=null)}function wr(t,e,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Dr(t,e,r){var n=e.datas;return n.datas||(n.datas={}),Ge({},r,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:n.datas})}function Cr(t,e,r,n){return n&&Lr.prototype.triggerEvent.call(t,e,r),t.triggerEvent(e,r)}function Or(t,e){return window.getComputedStyle(t,e)}function Pr(t,e,r){var n={},o={};return t.filter((function(t){var c=t.name;if(n[c]||!e.some((function(e){return t[e]})))return!1;if(!r&&t.ableGroup){if(o[t.ableGroup])return!1;o[t.ableGroup]=!0}return n[c]=!0,!0}))}function Rr(t,e,r){return t*(e?r:1/r)}function zr(t,e,r){return t*(e?1/r:r)}function Br(t,e){return t===e||null==t&&null==e}function _r(t,e){var r=[],n=[];return t.forEach((function(o,c){var l=e(o,c,t),f=n.indexOf(l),h=r[f]||[];-1===f&&(n.push(l),r.push(h)),h.push(o)})),r}function Tr(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Gr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(a,b){return Math.abs(b)-Math.abs(a)})),t[0]}function Ar(t,e,r){return Qt(Yt(t,r),qt(e,r),r)}function Nr(t,e){var r,n=t.is3d?4:3;return r=Ar(t.rootMatrix,[e.distX,e.distY],n),e.distX=r[0],e.distY=r[1],e}function jr(t,e,r,n,o){return Jt(ir(t,Zt(r,e),o),n)}function Ir(t,e,r){return[[e[0],e[0]*t[1]/t[0]],[e[1]*t[0]/t[1],e[1]]].filter((function(t){return t.every((function(t,i){return r?t<=e[i]:t>=e[i]}))}))[0]||t}function kr(t,e,r,n,o,c,l){var f="Start"===o;if(f&&n.indexOf("Control")>-1&&!c.isRequest&&t.areaElement===c.inputEvent.target)return!1;var h=""+r+n+o,d=""+r+n+"Condition",v="End"===o,m=o.indexOf("After")>-1;f&&t.updateRect(o,!0,!1),""!==o||m||Nr(t.state,c);var y=n.indexOf("Group")>-1,x=t[e];if(!x.length)return!1;var E=x.filter((function(t){return t[h]})),S=c.datas,M=S.render||(S.render={}),w=Ge({},c,{datas:M,originalDatas:S}),D=E.filter((function(e){var r=f&&e[d],n=e.name,o=S[n]||(S[n]={});return!(r&&!r(c,t))&&e[h](t,Ge({},c,{datas:o,originalDatas:S}))})),C=D.length;if(f){if(E.length&&!C)return t.state.dragger=null,t.moveables&&t.moveables.forEach((function(t){t.state.dragger=null})),!1;!function(t,e,r){var n=Dr(t,r,{isPinch:!!r.isPinch}),o=e?"Group":"";e&&(n.targets=t.props.targets),Cr(t,"onRender"+o+"Start",n)}(t,y,w)}else v?function(t,e,r){var n=Dr(t,r,{isPinch:!!r.sPinch,isDrag:r.isDrag}),o=e?"Group":"";e&&(n.targets=t.props.targets),Cr(t,"onRender"+o+"End",n)}(t,y,w):C&&function(t,e,r){var n=Dr(t,r,{isPinch:!!r.isPinch}),o=e?"Group":"";e&&(n.targets=t.props.targets),Cr(t,"onRender"+o,n)}(t,y,w);if(v&&(t.state.dragger=null),t.isUnmounted)return!1;!f&&C&&(D.some((function(t){return t.updateRect}))&&!y?t.updateRect(o,!1,!1):t.updateRect(o,!0,!1)),(!f&&C||v&&!C)&&!l&&t.forceUpdate(),f||v||m||!C||kr(t,e,r,n,o+"After",c)}function Wr(t,e,r){var n=t.controlBox.getElement(),o=[];o.push(n),t.props.dragArea||o.push(e);var c=function(e){var r=e.inputEvent.target;return r===t.areaElement||!t.isMoveableElement(r)||r.className.indexOf("moveable-area")>-1||r.className.indexOf("moveable-padding")>-1};return Xr(t,o,"targetAbles",r,{dragstart:c,pinchstart:c})}function Xr(t,e,r,n,o){void 0===o&&(o={});var c=t.props,l=c.pinchOutside,f=c.pinchThreshold,h={container:window,pinchThreshold:f,pinchOutside:l};return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(c){var l=""+e+c.toLowerCase();h[l]=function(f){return!(o[l]&&!o[l](f))&&kr(t,r,e,n,c,f)}}))})),new we(e,h)}var Yr=fe("div",ke);function Hr(t,e,r,n){var o=Lt(e,r),c=t?Er(o/Math.PI*180,15)%180:-1;return et("div",{key:"line"+n,className:Fe("line","direction",t),"data-rotation":c,"data-direction":t,style:lr(e,r,o)})}var Lr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={container:null,target:null,beforeMatrix:Ve(),matrix:Ve(),targetMatrix:Ve(),offsetMatrix:Ve(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},containerClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},moveableClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},rotation:0},e.targetAbles=[],e.controlAbles=[],e.isUnmounted=!1,e}Te(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=this.state,r=t.edge,n=t.parentPosition,o=t.className,c=t.target,l=t.zoom;this.checkUpdate(),this.updateRenderPoses();var f=n||{left:0,top:0},h=f.left,v=f.top,m=e.left,y=e.top,x=e.target,E=e.direction,S=e.renderPoses,M=t.targets,w=(M&&M.length||c)&&x;return et(Yr,{ref:d(this,"controlBox"),className:Fe("control-box",-1===E?"reverse":"")+" "+o,style:{position:"absolute",display:w?"block":"none",transform:"translate("+(m-h)+"px, "+(y-v)+"px) translateZ(50px)","--zoom":l,"--zoompx":l+"px"}},this.renderAbles(),Hr(r?"n":"",S[0],S[1],0),Hr(r?"e":"",S[1],S[3],1),Hr(r?"w":"",S[0],S[2],2),Hr(r?"s":"",S[2],S[3],3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,r=t.container;this.updateEvent(t),r||e||this.updateRect("End",!1,!0)},r.componentDidUpdate=function(t){this.updateEvent(t)},r.componentWillUnmount=function(){this.isUnmounted=!0,Mr(this,"targetDragger"),Mr(this,"controlDragger")},r.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(Ie)>-1},r.dragStart=function(t){return this.targetDragger&&this.targetDragger.onDragStart(t),this},r.hitTest=function(t){var rect;if(t instanceof Element){var e=t.getBoundingClientRect();rect={left:e.left,top:e.top,width:e.width,height:e.height}}else rect=Ge({width:0,height:0},t);var r=this.state.targetClientRect,n=r.left,o=r.top,c=r.width,l=r.height,f=rect.left,h=rect.top,d=f+rect.width,v=h+rect.height,m=n+c,y=o+l,x=Math.max(n,f),E=Math.min(m,d),S=Math.max(o,h),M=Math.min(y,v);if(E<x||M<S)return 0;var w=(Math.min(m,d)-Math.max(f,n))*(Math.min(y,v)-Math.max(o,h));return Math.min(100,(E-x)*(M-S)/w*100)},r.isInside=function(t,e){var r=this.state,n=r.pos1,o=r.pos2,c=r.pos3,l=r.pos4,f=r.target,h=r.targetClientRect;return!!f&&function(t,e,r,n,o){var c=[wr(t,e,r),wr(t,r,n),wr(t,n,e)],l=[wr(t,r,n),wr(t,n,o),wr(t,o,r)];return!!(c.every((function(t){return t>=0}))||c.every((function(t){return t<=0}))||l.every((function(t){return t>=0}))||l.every((function(t){return t<=0})))}([t-h.left,e-h.top],n,o,c,l)},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,o=n.parentMoveable,c=this.state,l=c.target||this.props.target,f=this.getContainer(),h=o?o.props.rootContainer:n.rootContainer;this.updateState(gr(this.controlBox&&this.controlBox.getElement(),l,f,f,h||f,e?c:void 0),!o&&r)},r.updateEvent=function(t){var e=this.controlBox.getElement(),r=this.targetAbles.length,n=this.controlAbles.length,o=this.props,c=o.dragTarget||o.target,l=t.dragTarget||t.target,f=o.dragArea,h=t.dragArea,d=!f&&l!==c,v=!r&&this.targetDragger||d||h!==f;v&&(Mr(this,"targetDragger"),this.updateState({dragger:null})),n||Mr(this,"controlDragger"),c&&r&&!this.targetDragger&&(this.targetDragger=Wr(this,c,"")),!this.controlDragger&&n&&(this.controlDragger=Xr(this,e,"controlAbles","Control")),v&&this.unsetAbles()},r.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,e=xr(this.state),r=e[0],n=e[1],o=e[2],c=e[3],rect=ar(e),l=t.width,f=t.height,h=rect.width,d=rect.height,v=rect.left,m=rect.top,y=[t.left,t.top],x=Zt(y,t.origin);return{width:h,height:d,left:v,top:m,pos1:r,pos2:n,pos3:o,pos4:c,offsetWidth:l,offsetHeight:f,beforeOrigin:Zt(y,t.beforeOrigin),origin:x}},r.request=function(t,param,e){void 0===param&&(param={});var r=this.props,n=r.ables,o=r.groupable,c=n.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var l=this,f=c.request(this),h=f.isControl?"controlAbles":"targetAbles",d=(o?"Group":"")+(f.isControl?"Control":""),v={request:function(t){return kr(l,h,"drag",d,"",Ge({},f.request(t),{isRequest:!0}),e),this},requestEnd:function(){return kr(l,h,"drag",d,"End",Ge({},f.requestEnd(),{isRequest:!0})),this}};return kr(l,h,"drag",d,"Start",Ge({},f.requestStart(param),{isRequest:!0}),e),param.isInstant?v.request(param).requestEnd():v},r.updateRenderPoses=function(){var t=this.state,e=this.props,r=t.beforeOrigin,n=t.transformOrigin,o=t.matrix,c=t.is3d,l=t.pos1,f=t.pos2,h=t.pos3,d=t.pos4,v=t.left,m=t.top,y=e.padding||{},x=y.left,E=void 0===x?0:x,S=y.top,M=void 0===S?0:S,w=y.bottom,D=void 0===w?0:w,C=y.right,O=void 0===C?0:C,P=c?4:3,R=e.groupable?r:Zt(r,[v,m]);t.renderPoses=[Zt(l,jr(o,[-E,-M],n,R,P)),Zt(f,jr(o,[O,-M],n,R,P)),Zt(h,jr(o,[-E,D],n,R,P)),Zt(d,jr(o,[O,D],n,R,P))]},r.checkUpdate=function(){var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,o=this.state,c=o.target,l=o.container;(c||e)&&(this.updateAbles(),(!Br(c,e)||!Br(l,r))&&(this.updateState({target:e,container:r}),n||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,e){var r=this.props[t];return r&&r(e)},r.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props,n=r.triggerAblesSimultaneously,o=t.filter((function(t){return t&&r[t.name]})),c="drag"+e+"ControlStart",l=Pr(o,["drag"+e+"Start","pinch"+e+"Start"],n),f=Pr(o,[c],n);this.targetAbles=l,this.controlAbles=f},r.updateState=function(t,e){if(e)this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},r.renderAbles=function(){var t,e,r,n,o=this,c=this.props,l=c.ables,f=c.triggerAblesSimultaneously,h=l.filter((function(t){return t&&c[t.name]})),d={createElement:et};return(t=Tr(Pr(h,["render"],f).map((function(t){return(0,t.render)(o,d)||[]}))).filter((function(t){return t})),e=function(t){return t.key},r=[],n={},t.forEach((function(o,c){var l=e(o,c,t),f=n[l];f||(f=[],n[l]=f,r.push(f)),f.push(o)})),r).map((function(t){return t[0]}))},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0},e}(pt);function qr(t){return Lt([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Fr={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchOutside:Boolean,pinchThreshold:Number},pinchStart:function(t,e){var r=e.datas,n=e.touches,o=e.targets,c=t.props,l=c.pinchable,f=c.ables;if(!l)return!1;var h="onPinch"+(o?"Group":"")+"Start",d="drag"+(o?"Group":"")+"ControlStart",v=(!0===l?t.controlAbles:f.filter((function(t){return l.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[d]})),m=Dr(t,e,{});o&&(m.targets=o);var y=Cr(t,h,m);r.isPinch=!1!==y,r.ables=v;var x=r.isPinch;if(!x)return!1;var E=qr(n);return v.forEach((function(n){if(r[n.name+"Datas"]={},n[d]){var o=Ge({},e,{datas:r[n.name+"Datas"],parentRotate:E,isPinch:!0});n[d](t,o)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},x},pinch:function(t,e){var r=e.datas,n=e.scale,o=e.distance,c=e.touches,l=e.inputEvent,f=e.targets;if(r.isPinch){var h=qr(c),d=o*(1-1/n),v=Dr(t,e,{});f&&(v.targets=f),Cr(t,"onPinch"+(f?"Group":""),v);var m=r.ables,y="drag"+(f?"Group":"")+"Control";return m.forEach((function(n){n[y]&&n[y](t,Ge({},e,{datas:r[n.name+"Datas"],inputEvent:l,parentDistance:d,parentRotate:h,isPinch:!0}))})),v}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,o=e.inputEvent,c=e.targets;if(r.isPinch){var l="onPinch"+(c?"Group":"")+"End",f=Dr(t,e,{isDrag:n});c&&(f.targets=c),Cr(t,l,f);var h=r.ables,d="drag"+(c?"Group":"")+"ControlEnd";return h.forEach((function(c){c[d]&&c[d](t,Ge({},e,{isDrag:n,datas:r[c.name+"Datas"],inputEvent:o,isPinch:!0}))})),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,Ge({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Ge({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Ge({},e,{targets:t.props.targets}))}};function Vr(t,e,r,n,o){var c=t.dragger.move(e,r),l=c.originalDatas||c.datas,f=l.draggable||(l.draggable={});return Ge({},o?Nr(t,c):c,{isDrag:!0,isPinch:!!n,parentEvent:!0,datas:f})}var Ur=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},Ge({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var r,n;return this.isFlag?(r=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0),this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function $r(t,e,r,n,o,c){var l=!!r.match(/Start$/g),f=!!r.match(/End$/g),h=o.inputEvent,d=o.isPinch,v=o.datas,m=t.moveables.map((function(t,i){var o={};l?o=(new Ur).dragStart(n,h):(t.state.dragger||(t.state.dragger=v.childDraggers[i]),o=Vr(t.state,n,h,d,c));var m=e[r](t,Ge({},o,{parentFlag:!0}));return f&&(t.state.dragger=null),m}));return l&&(v.childDraggers=t.moveables.map((function(t){return t.state.dragger}))),m}function Kr(t,e,r,n,o,c){var l=e.name,f=n[l]||(n[l]=[]),h=!!r.match(/End$/g);return t.moveables.map((function(t,i){var n=f[i]||(f[i]={}),l="function"==typeof o?o(t,n):o,d=e[r](t,Ge({},l,{datas:n,parentFlag:!0}));return d&&c&&c(t,n,d,i),h&&(t.state.dragger=null),d}))}function Zr(t,e){var r=e.datas,n=t.state,o=n.matrix,c=n.beforeMatrix,l=n.is3d,f=n.left,h=n.top,d=n.origin,v=n.offsetMatrix,m=n.targetMatrix,y=n.transformOrigin,x=l?4:3;r.is3d=l,r.matrix=o,r.targetMatrix=m,r.beforeMatrix=c,r.offsetMatrix=v,r.transformOrigin=y,r.inverseMatrix=Yt(o,x),r.inverseBeforeMatrix=Yt(c,x),r.absoluteOrigin=qt(Zt([f,h],d),x),r.startDragBeforeDist=Qt(r.inverseBeforeMatrix,r.absoluteOrigin,x),r.startDragDist=Qt(r.inverseMatrix,r.absoluteOrigin,x)}function Jr(t,e){var r=t.datas,n=t.distX,o=t.distY,c=r.inverseBeforeMatrix,l=r.inverseMatrix,f=r.is3d,h=r.startDragBeforeDist,d=r.startDragDist,v=f?4:3;return Jt(Qt(e?c:l,Zt(r.absoluteOrigin,[n,o]),v),e?h:d)}function Qr(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function tn(t,e){return Qr(e).map((function(e){return t[e]}))}function en(t,e){var r=tn(t,e);return[Kt.apply(void 0,r.map((function(t){return t[0]}))),Kt.apply(void 0,r.map((function(t){return t[1]})))]}function rn(t,e){var r=t[0],n=t[1],o=t[2];return en([t[3],o,n,r],e)}function nn(t,e,r,n,o,c){var l=rn(or(e,r,n,o),c);return[t[0]-l[0],t[1]-l[1]]}function on(t,e,r,n){return Ut(t,Ue(e,n,r),n)}function an(t,e){var r=t.transformOrigin,n=t.offsetMatrix,o=t.is3d?4:3;return on(n,Ut(t.targetMatrix,ie(e,o),o),r,o)}function sn(t,e,r,n,o,c){var l=t.props.groupable,f=t.state,h=f.transformOrigin,d=f.targetMatrix,v=f.offsetMatrix,m=f.is3d,y=f.width,x=f.height,E=f.left,S=f.top,M=m?4:3,w=l?E:0,D=l?S:0;return Jt(nn(o,on(v,d,function(t,e,r,n,o,c){return void 0===n&&(n=e),void 0===o&&(o=r),void 0===c&&(c=[0,0]),t?t.map((function(t,i){var l=A(t),f=l.value,h=l.unit,d=i?o:n,v=i?r:e;return"%"===t||isNaN(f)?v*(d?c[i]/d:0):"%"!==h?f:v*f/100})):c}(c,e,r,y,x,h),M),e,r,M,n),[w,D])}function un(t,e){return function(t,e){return rn([t[0],t[1],t[2],t[3]],e)}(xr(t.state),e)}function cn(t){return t.isRequest?t.parentDirection:k(t.inputEvent.target,Fe("direction"))}function ln(t,e,r,n,o,c){var l=o[0],f=o[1],h=c[0],d=c[1],v=[],m=n?0:1,y="vertical"===e?"horizontal":"vertical",x=_r(t.filter((function(t){return t.type===e})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var e=t.pos,r=t.sizes;return e[m]<=d&&h<=e[m]+r[m]}));return x.forEach((function(t){var e=t.pos[n],o=e+t.sizes[n];x.forEach((function(t){var c=t.pos,h=t.sizes,d=t.element,m=c[n],E=m+h[n],S=0,M=0,w=!0;if(o<=m)l<(S=E-(M=o-m))-r&&(w=!1);else{if(!(E<=e))return;f>(S=m-(M=e-E))+r&&(w=!1)}if(w&&v.push({pos:"vertical"===y?[S,c[1]]:[c[0],S],element:d,sizes:h,size:0,type:y,gap:M,gapGuidelines:x}),o<=l&&f<=m){var D=(m+o-(f-l))/2;Er(l-(D-r),.1)>=0&&v.push({pos:"vertical"===y?[D,c[1]]:[c[0],D],element:d,sizes:h,size:0,type:y,gap:o-l,gapGuidelines:x})}}))})),v}function fn(t,e,r,n,o){var c=function(t){var e=t.state,r=e.guidelines,n=e.containerClientRect,o=n.scrollHeight,c=n.scrollWidth,l=t.props,f=l.snapHorizontal,h=void 0===f||f,d=l.snapVertical,v=void 0===d||d,m=l.snapGap,y=void 0===m||m,x=l.verticalGuidelines,E=l.horizontalGuidelines,S=l.snapThreshold,M=void 0===S?5:S,w=r.slice();if(y){var D=ar(xr(t.state)),C=D.top,O=D.left,P=D.bottom,R=D.right,z=r.filter((function(t){return t.element}));w.push.apply(w,ln(z,"horizontal",M,0,[O,R],[C,P]).concat(ln(z,"vertical",M,1,[C,P],[O,R])))}return h&&E&&E.forEach((function(t){w.push({type:"horizontal",pos:[0,Er(t,.1)],size:c})})),v&&x&&x.forEach((function(t){w.push({type:"vertical",pos:[Er(t,.1),0],size:o})})),w}(t),l=t.props,f=l.snapElement,h=void 0===f||f,d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,i=0;i<r;++i){var n=t[i];if(!O(n))return n}return t[r]}(o,l.snapThreshold,5);return{vertical:hn(c,"vertical",e,d,n,h),horizontal:hn(c,"horizontal",r,d,n,h)}}function pn(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],o=n.offset,c=n.dist,l=n.guideline;return{isSnap:e,offset:o,dist:c,pos:r.pos,guideline:l}}function hn(t,e,r,n,o,c){if(!t||!t.length)return{isSnap:!1,posInfos:[]};var l="vertical"===e?0:1,f=r.map((function(r){var f=t.map((function(t){var e=t.pos,n=r-e[l];return{offset:n,dist:Math.abs(n),guideline:t}})).filter((function(t){var r=t.guideline,l=t.dist,f=r.type,h=r.center,element=r.element;return!(!c&&element||!o&&h||f!==e||l>n)})).sort((function(a,b){return a.dist-b.dist}));return{pos:r,guidelineInfos:f}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(a,b){return a.guidelineInfos[0].dist-b.guidelineInfos[0].dist}));return{isSnap:f.length>0,posInfos:f}}function dn(t,e){return t.slice().sort((function(a,b){var t=a.sign[e],r=b.sign[e],n=a.offset[e],o=b.offset[e],c=Math.abs(n),l=Math.abs(o);return t?r?a.isBound&&b.isBound?l-c:a.isBound?-1:b.isBound?1:a.isSnap&&b.isSnap?c-l:a.isSnap?-1:b.isSnap||c<1e-7?1:l<1e-7?-1:c-l:-1:1}))[0]}function gn(t,line){var e=Kt(line[0][0],line[1][0]),r=Kt(line[0][1],line[1][1]);return{vertical:e<=t[0],horizontal:r<=t[1]}}function vn(t,e){var r,n,o=e[0],c=e[1],l=c[0]-o[0],f=c[1]-o[1];if(Math.abs(l)<1e-7&&(l=0),Math.abs(f)<1e-7&&(f=0),l)if(f){r=f/l*(t[0]-o[0])+o[1],n=t[1]}else r=o[1],n=t[1];else r=o[0],n=t[0];return r-n}function mn(t,line,e){void 0===e&&(e=1e-7);var r=vn(t[0],line)<=0;return t.slice(1).every((function(t){var n=vn(t,line);return n<=0===r||Math.abs(n)<=e}))}function bn(t,e,r,n,o){return void 0===o&&(o=0),n&&e-o<=t||!n&&t<=r+o?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function yn(line,t,e,r){var n=line[0],o=line[1],c=t[0],l=t[1],f=o[1]-n[1],h=o[0]-n[0],d=l[1]-c[1];if(l[0]-c[0]){if(!d&&f){var a=f/h;return bn(h?(c[1]-n[1])/a+n[0]:n[0],c[0],l[0],e,r)}}else if(h)return bn(f?f/h*(c[0]-n[0])+n[1]:n[1],c[1],l[1],e,r);return{isBound:!1,offset:0}}function xn(t,e,r,n){return e.map((function(e){var o=e[0],c=e[1],l=e[2],f=function(t,line,e){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var n=r.left,o=r.top,c=r.width,l=r.height,f=[[n,o],[n,o+l]],h=[[n,o],[n+c,o]],d=[[n+c,o],[n+c,o+l]],v=[[n,o+l],[n+c,o+l]],m=gn(e,line),y=m.horizontal,x=m.vertical;if(mn([e,[n,o],[n+c,o],[n,o+l],[n+c,o+l]],line))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var E=yn(line,h,x),S=yn(line,v,x),M=yn(line,f,y),w=yn(line,d,y),D=E.isBound&&S.isBound,C=E.isBound||S.isBound,O=M.isBound&&w.isBound,P=M.isBound||w.isBound,R=Gr(E.offset,S.offset),z=Gr(M.offset,w.offset),B=[0,0],_=!1,T=!1;return Math.abs(z)<Math.abs(R)?(B=[R,0],_=C,T=D):(B=[0,z],_=P,T=O),{isAllBound:T,isVerticalBound:C,isHorizontalBound:P,isBound:_,offset:B}}(t,[c,l],r),h=f.isBound,d=f.offset,v=f.isVerticalBound,m=f.isHorizontalBound,y=Jr({datas:n,distX:d[0],distY:d[1]}).map((function(t,i){return t*(o[i]?2/o[i]:0)}));return{sign:o,isBound:h,isVerticalBound:v,isHorizontalBound:m,isSnap:!1,offset:y}}))}function En(t,e,r){var n,o=xn(t,Sn(e,[0,0],!1).map((function(t){var e=t[0],r=t[1],n=t[2];return[e.map((function(t){return 2*Math.abs(t)})),r,n]})),en(e,[0,0]),r),c=dn(o,0),l=dn(o,1),f=0,h=0,d=c.isVerticalBound||l.isVerticalBound,v=c.isHorizontalBound||l.isHorizontalBound;return(d||v)&&(f=(n=function(t,e){var r=t.datas,n=t.distX,o=t.distY,c=r.beforeMatrix,l=r.matrix,f=r.is3d,h=r.startDragBeforeDist,d=r.startDragDist,v=r.absoluteOrigin,m=f?4:3;return Jt(Qt(e?c:l,Zt(e?h:d,[n,o]),m),v)}({datas:r,distX:-c.offset[0],distY:-l.offset[1]}))[0],h=n[1]),{vertical:{isBound:d,offset:f},horizontal:{isBound:v,offset:h}}}function Sn(t,e,r){return function(t,e){var r=[],n=t[0],o=t[1];return n&&o?r.push([[0,2*o],t,[-n,o]],[[2*n,0],t,[n,-o]]):n?(r.push([[2*n,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):o?(r.push([[0,2*o],[1,o],[-1,o]]),e&&r.push([[-1,0],[-1,o],[-1,-o]],[[1,0],[1,o],[1,-o]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(e,r).map((function(e){var r=e[0],n=e[1],o=e[2];return[r,en(t,n),en(t,o)]}))}function Mn(t,e,r,n){var o=n?t.map((function(t){return te(t,n)})):t,c=[r].concat(e);return[[o[0],o[1]],[o[1],o[3]],[o[3],o[2]],[o[2],o[0]]].some((function(line,i){return!mn(c,line)}))}function wn(t,e,r,n,o){var c=t.props.innerBounds,l=o*Math.PI/180;if(!c)return[];var f=c.left,h=c.top,d=c.width,v=c.height,m=f-n[0],y=f+d-n[0],x=h-n[1],E=h+v-n[1],S=[[m,x],[y,x],[m,E],[y,E]],M=en(r,[0,0]);if(!Mn(r,S,M,0))return[];var w=[],D=S.map((function(t){return[cr(t),Lt([0,0],t)]}));return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach((function(line){var t=Lt([0,0],function(t){var e=t[0],r=t[1],n=r[0]-e[0],o=r[1]-e[1];if(!n)return[e[0],0];if(!o)return[0,e[1]];var a=o/n,b=-a*e[0]+e[1];return[-b/(a+1/a),b/(a*a+1)]}(line)),r=function(t){var e=t[0],r=t[1],n=r[0]-e[0],o=r[1]-e[1];if(!n)return Math.abs(e[0]);if(!o)return Math.abs(e[1]);var a=o/n;return Math.abs((-a*e[0]+e[1])/Math.sqrt(Math.pow(a,2)+1))}(line);w.push.apply(w,D.filter((function(t){var e=t[0];return e&&r<=e})).map((function(e){var n=e[0],o=e[1],c=Math.acos(n?r/n:0);return[l+(o+c)-t,l+(o-c)-t]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Mn(e,S,M,t)})).map((function(t){return Er(180*t/Math.PI,1e-7)})))})),w}function Dn(t,e,r){var n=t.props.bounds||{},o=n.left,c=void 0===o?-1/0:o,l=n.top,f=void 0===l?-1/0:l,h=n.right,d=void 0===h?1/0:h,v=n.bottom,m={left:c,top:f,right:d,bottom:void 0===v?1/0:v};return{vertical:Cn(m,e,!0),horizontal:Cn(m,r,!1)}}function Cn(t,e,r){var n=t[r?"left":"top"],o=t[r?"right":"bottom"],c=Math.min.apply(Math,e),l=Math.max.apply(Math,e);return n+1>c?{isBound:!0,offset:c-n,pos:n}:o-1<l?{isBound:!0,offset:l-o,pos:o}:{isBound:!1,offset:0,pos:0}}function On(t,e,r){return(r?t.map((function(t){return te(t,r)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function Pn(t,e,r,n,o){var c=t.props.bounds,l=o*Math.PI/180;if(!c)return[];var f=c.left,h=void 0===f?-1/0:f,d=c.top,v=void 0===d?-1/0:d,m=c.right,y=void 0===m?1/0:m,x=c.bottom,E=void 0===x?1/0:x,S=h-n[0],M=y-n[0],w=v-n[1],D=E-n[1],C={left:S,top:w,right:M,bottom:D};if(!On(r,C,0))return[];var O=[];return[[S,0],[M,0],[w,1],[D,1]].forEach((function(t,i){var n=t[0],o=t[1];r.forEach((function(t){var r=Lt([0,0],t);O.push.apply(O,function(t,e,r){var n=cr(t),o=Math.sqrt(n*n-e*e)||0;return[o,-o].sort((function(a,b){return Math.abs(a-t[r?0:1])-Math.abs(b-t[r?0:1])})).map((function(t){return Lt([0,0],r?[t,e]:[e,t])}))}(t,n,o).map((function(t){return l+t-r})).filter((function(t){return!On(e,C,t)})).map((function(t){return Er(180*t/Math.PI,1e-7)})))}))})),O}function Rn(t,e,r){var n=ir(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}function zn(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var r=t.props,n=r.horizontalGuidelines,o=void 0===n?[]:n,c=r.verticalGuidelines,l=void 0===c?[]:c,f=r.elementGuidelines,h=void 0===f?[]:f,d=r.bounds,v=r.snapCenter;if(d||o.length||l.length||h.length){var m=e.containerClientRect,y=e.targetClientRect,x=y.top,E=y.left,S=e.rootMatrix,M=e.is3d?4:3,w=Rn(S,m,M),D=w[0],C=w[1],O=xr(e),P=Jt([Math.min.apply(Math,O.map((function(t){return t[0]}))),Math.min.apply(Math,O.map((function(t){return t[1]})))],Ar(S,[E-D,x-C],M)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),R=P[0],z=P[1],B=[];h.forEach((function(t){var rect=t.getBoundingClientRect(),e=rect.left-D,r=rect.top-C,n=r+rect.height,o=e+rect.width,c=Ar(S,[e,r],M),l=c[0],f=c[1],h=Ar(S,[o,n],M),d=h[0],m=h[1],y=d-l,x=m-f,E=[y,x];B.push({type:"vertical",element:t,pos:[Er(l+R,.1),f],size:x,sizes:E}),B.push({type:"vertical",element:t,pos:[Er(d+R,.1),f],size:x,sizes:E}),B.push({type:"horizontal",element:t,pos:[l,Er(f+z,.1)],size:y,sizes:E}),B.push({type:"horizontal",element:t,pos:[l,Er(m+z,.1)],size:y,sizes:E}),v&&(B.push({type:"vertical",element:t,pos:[Er((l+d)/2+R,.1),f],size:x,sizes:E,center:!0}),B.push({type:"horizontal",element:t,pos:[l,Er((f+m)/2+z,.1)],size:y,sizes:E,center:!0}))})),e.guidelines=B,e.enableSnap=!0}}}function Bn(t,e){var r=t.props,n=r.snappable,o=r.bounds,c=r.verticalGuidelines,l=r.horizontalGuidelines,f=t.state,h=f.guidelines,d=f.enableSnap;return!(!n||!d||e&&!0!==n&&n.indexOf(e)<0)&&!!(o||h&&h.length||c&&c.length||l&&l.length)}function _n(t,e,r,n,o){var c=function(t,e,r,n){var o=e[0]-t[0],c=e[1]-t[1];Math.abs(o)<1e-7&&(o=0);Math.abs(c)<1e-7&&(c=0);if(!o)return n?[0,0]:[0,r];if(!c)return n?[r,0]:[0,0];var a=c/o,b=t[1]-a*t[0];if(n){var l=a*(e[0]+r)+b;return[r,l-e[1]]}return[(e[1]+r-b)/a-e[0],r]}(t,e,r,n);if(!c)return[0,0];var l=Jr({datas:o,distX:c[0],distY:c[1]});return[l[0],l[1]]}function Tn(t,e,r,n,o,c){var l=or(t,e,r,c?4:3);return yr(l,Jt(n,rn(l,o)))}function Gn(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function An(t,e){return t.isBound?t.offset:e.isSnap?pn(e).offset:0}function Nn(t,e,r,n){var o=function(t,e,r){var n=t.props.bounds||{},o=n.left,c=void 0===o?-1/0:o,l=n.top,f=void 0===l?-1/0:l,h=n.right,d=void 0===h?1/0:h,v=n.bottom,m=void 0===v?1/0:v,y=r[0],x=r[1],E=Jt(r,e),S=E[0],M=E[1];Math.abs(S)<1e-7&&(S=0),Math.abs(M)<1e-7&&(M=0);var w=M>0,D=S>0,C={isBound:!1,offset:0,pos:0},O={isBound:!1,offset:0,pos:0};if(0===S&&0===M)return{vertical:C,horizontal:O};if(0===S)w?m<x&&(O.pos=m,O.offset=x-m):f>x&&(O.pos=f,O.offset=x-f);else if(0===M)D?d<y&&(C.pos=d,C.offset=y-d):c>y&&(C.pos=c,C.offset=y-c);else{var a=M/S,b=r[1]-a*y,P=0,R=0,z=!1;D&&d<=y?(P=a*d+b,R=d,z=!0):!D&&y<=c?(P=a*c+b,R=c,z=!0):w&&m<=x?(R=((P=m)-b)/a,z=!0):!w&&x<=f&&(R=((P=f)-b)/a,z=!0),z&&(C.isBound=!0,C.pos=R,C.offset=y-R,O.isBound=!0,O.pos=P,O.offset=x-P)}return{vertical:C,horizontal:O}}(t,e,r),c=o.horizontal,l=o.vertical,f=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=r[0],o=r[1],c=e[0],l=e[1],f=Jt(r,e),h=f[0],d=f[1],v=d>0,m=h>0;h=Math.abs(h)<=1e-7?0:h,d=Math.abs(d)<=1e-7?0:d;var y={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(0===h&&0===d)return{vertical:y,horizontal:x};var E=fn(t,h?[n]:[],d?[o]:[]),S=E.vertical,M=E.horizontal;S.posInfos.filter((function(t){var e=t.pos;return m?e>=c:e<=c})),M.posInfos.filter((function(t){var e=t.pos;return v?e>=l:e<=l})),S.isSnap=S.posInfos.length>0,M.isSnap=M.posInfos.length>0;var w=pn(S),D=w.isSnap,C=w.guideline,O=pn(M),P=O.isSnap,R=O.guideline,z=P?R.pos[1]:0,B=D?C.pos[0]:0;if(0===h)P&&(x.isSnap=!0,x.pos=R.pos[1],x.offset=o-x.pos);else if(0===d)D&&(y.isSnap=!0,y.pos=B,y.offset=n-B);else{var a=d/h,b=r[1]-a*n,_=0,T=0,G=!1;D?(_=a*(T=B)+b,G=!0):P&&(T=((_=z)-b)/a,G=!0),G&&(y.isSnap=!0,y.pos=T,y.offset=n-T,x.isSnap=!0,x.pos=_,x.offset=o-_)}return{vertical:y,horizontal:x}}(t,e,r),h=f.horizontal,d=f.vertical,v=Gn(c,h),m=Gn(l,d),y=Math.abs(v),x=Math.abs(m);return{horizontal:{isBound:c.isBound,isSnap:h.isSnap,offset:v,dist:y},vertical:{isBound:l.isBound,isSnap:d.isSnap,offset:m,dist:x}}}function jn(t,e,r,n){void 0===n&&(n=r);var o=Dn(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]}))),c=o.horizontal,l=o.vertical,f=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:fn(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]}))),h=f.horizontal,d=f.vertical,v=An(c,h),m=An(l,d),y=Math.abs(v),x=Math.abs(m);return{horizontal:{isBound:c.isBound,isSnap:h.isSnap,offset:v,dist:y},vertical:{isBound:l.isBound,isSnap:d.isSnap,offset:m,dist:x}}}function In(t){return t?t/Math.abs(t):0}function kn(t,e,r,n,o,c){var l=function(t,e){var r=[],n=[-t[0],-t[1]];return t[0]&&t[1]?(r.push([n,[t[0],-t[1]]],[n,[-t[0],t[1]]]),e&&r.push([n,t])):t[0]?e?r.push([n,[n[0],-1]],[n,[n[0],1]],[n,[t[0],-1]],[n,t],[n,[t[0],1]]):r.push([[n[0],-1],[t[0],-1]],[[n[0],0],[t[0],0]],[[n[0],1],[t[0],1]]):t[1]?e?r.push([n,[-1,n[1]]],[n,[1,n[1]]],[n,[-1,t[1]]],[n,[1,t[1]]],[n,t]):r.push([[-1,n[1]],[-1,t[1]]],[[0,n[1]],[0,t[1]]],[[1,n[1]],[1,t[1]]]):r.push([n,[1,0]],[n,[-1,0]],[n,[0,-1]],[n,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),r}(r,n),f=Sn(e,r,n),h=function(t,e,r,n,o,c){return r.map((function(r){var l=r[0],f=r[1],h=en(e,l),d=en(e,f),v=n?Nn(t,h,d,o):jn(t,o,[d]),m=v.horizontal,y=m.dist,x=m.offset,E=m.isBound,S=m.isSnap,M=v.vertical,w=M.dist,D=M.offset,C=M.isBound,O=M.isSnap,P=Jt(f,l);if(!D&&!x)return{isBound:C||E,isSnap:O||S,sign:P,offset:[0,0]};var R=y<w,z=_n(h,d,-(R?D:x),R,c).map((function(t,i){return t*(P[i]?2/P[i]:0)}));return{sign:P,isBound:R?C:E,isSnap:R?O:S,offset:z}}))}(t,e,l,n,o,c).concat(xn(t,f,en(e,[0,0]),c)),d=dn(h,0),v=dn(h,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function Wn(t,e,r,n,o,c,l,f){for(var h=xr(t.state),d=t.props.keepRatio,v=0,m=0,i=0;i<2;++i){var y=kn(t,e(v,m),o,d,l,f),x=y.width,E=y.height,S=x.isBound,M=E.isBound,w=x.offset,D=E.offset;if(1===i&&(S||(w=0),M||(D=0)),0===i&&l&&!S&&!M)return[0,0];if(d){var C=Math.abs(w)*(r?1/r:1),O=Math.abs(D)*(n?1/n:1);(S&&M?C<O:M||!S&&C<O)?w=r*D/n:D=n*w/r}v+=w,m+=D}if(o[0]&&o[1]){var P=function(t,e,r,n,o){var c=[-r[0],-r[1]],l=t.state,f=l.width,h=l.height,d=t.props.bounds,v=1/0,m=1/0;if(d){var y=[[r[0],-r[1]],[-r[0],r[1]]],x=d.left,E=void 0===x?-1/0:x,S=d.top,M=void 0===S?-1/0:S,w=d.right,D=void 0===w?1/0:w,C=d.bottom,O=void 0===C?1/0:C;y.forEach((function(t){var r=t[0]!==c[0],l=t[1]!==c[1],d=en(e,t),y=In(t[1]-c[1]),x=In(t[0]-c[0]);if(l){var S=_n(n,d,(n[1]<d[1]?O:M)-d[1],!1,o)[1];isNaN(S)||(m=h+y*S)}if(r){var w=_n(n,d,(n[0]<d[0]?D:E)-d[0],!0,o)[0];isNaN(w)||(v=f+x*w)}}))}return{maxWidth:v,maxHeight:m}}(t,h,o,c,f),R=P.maxWidth,z=P.maxHeight,B=function(t,e,r,n,o,c,l,f,h){var d=jn(t,f,[en(e,l)]),v=d.horizontal.offset,m=d.vertical.offset;if(m||v){var y=Jr({datas:h,distX:-m,distY:-v}),x=y[0],E=y[1];return[Math.min(o||1/0,r+l[0]*x)-r,Math.min(c||1/0,n+l[1]*E)-n]}return[0,0]}(t,e(v,m),r+v,n+m,R,z,o,l,f);v+=w=B[0],m+=D=B[1]}return[v,m]}function Xn(t,rect,e,r){if(!Bn(t,"rotatable"))return r;var n=rect.pos1,o=rect.pos2,c=rect.pos3,l=rect.pos4,f=r*Math.PI/180,h=[n,o,c,l].map((function(t){return Jt(t,e)})),d=h.map((function(t){return te(t,f)})),v=Pn(t,h,d,e,r).concat(wn(t,h,d,e,r));return v.sort((function(a,b){return Math.abs(a-r)-Math.abs(b-r)})),v.length?v[0]:r}function Yn(t,e,r,n,o,c){if(!Bn(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var l=yr(c.absolutePoses,[e,r]),f=ar(l),h=f.left,d=f.right,v=f.top,m=f.bottom,y=[[h,v],[d,v],[h,m],[d,m]];t.props.snapCenter&&y.push([(h+d)/2,(v+m)/2]);var x=jn(t,o,y,l),E=x.vertical,S=x.horizontal,M=En(t,l,c),w=M.vertical,D=M.horizontal,C=E.isSnap,O=S.isSnap,P=E.isBound||w.isBound,R=S.isBound||D.isBound,z=function(t,e,r,n,o){var c=e[0],l=e[1],f=r[0],h=r[1],d=n[0],v=n[1],m=o[0],y=o[1],x=-m,E=-y;if(t&&c&&l){x=0,E=0;var S=[];if(f&&h?S.push([0,y],[m,0]):f?S.push([m,0]):h?S.push([0,y]):d&&v?S.push([0,y],[m,0]):d?S.push([m,0]):v&&S.push([0,y]),S.length){S.sort((function(a,b){return cr(Jt([c,l],a))-cr(Jt([c,l],b))}));var M=S[0];if(M[0]&&Math.abs(c)>1e-7)x=-M[0],E=l*Math.abs(c+x)/Math.abs(c)-l;else if(M[1]&&Math.abs(l)>1e-7){var w=l;E=-M[1],x=c*Math.abs(l+E)/Math.abs(w)-c}if(t&&h&&f)if(Math.abs(x)>1e-7&&Math.abs(x)<Math.abs(m))x*=D=Math.abs(m)/Math.abs(x),E*=D;else if(Math.abs(E)>1e-7&&Math.abs(E)<Math.abs(y)){var D;x*=D=Math.abs(y)/Math.abs(E),E*=D}else x=Gr(-m,x),E=Gr(-y,E)}}else x=c||f?-m:0,E=l||h?-y:0;return[x,E]}(n,[e,r],[P,R],[C,O],[Gr(E.offset,w.offset),Gr(S.offset,D.offset)]);return[{isBound:P,isSnap:C,offset:z[0]},{isBound:R,isSnap:O,offset:z[1]}]}function Hn(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var r=t.guideline;e.indexOf(r)>-1||e.push(r)}))})),e}function Ln(t,e,r,n){var o=t-r,c=o<0?o+e:n;return{size:(o<0?0:o)-c,pos:c}}function qn(t,e,r,n){var o=[],c=_r(t.filter((function(t){var element=t.element,e=t.gap;return element&&!e})),(function(t){var element=t.element,r=t.pos,c=r[n],l=(Math.min(0,c-e)<0?-1:1)+"_"+r[n?0:1],f=function(t,e,r){var n=I(t,e);return n>-1?t[n]:r}(o,(function(t){var e=t[0],r=t[1];return element===e&&c===r}));return f?f[2]:(o.push([element,c,l]),l)}));return c.forEach((function(t){t.sort((function(a,b){return Ln(a.pos[n],a.size,e,r).size-Ln(b.pos[n],a.size,e,r).size||a.pos[n?0:1]-b.pos[n?0:1]}))})),c}function Fn(t,e,r,n,o,c,l,f,h,d,v,m){var y=e[0],x=e[1],E=e[2],S=e[3];return Tr(t.map((function(t,i){var e=!0;return t.map((function(t,M){var w,D=t.pos,C=t.size,O=Ln(D[d],C,n,o),P=O.pos,R=O.size;if(R<l)return null;var z=e;e=!1;var B=f&&z?parseFloat(R.toFixed(h)):0;return m.createElement("div",{className:Fe("line",y,"guideline","dashed"),"data-size":B>0?v(B):"",key:y+"LinkGuidline"+i+"-"+M,style:(w={},w[x]=r+P+"px",w[E]=-c+D[d?0:1]+"px",w[S]=R+"px",w)})}))})))}function Vn(t,e,r,n,o,c){var l=e[0],f=e[1],h=e[2],d=e[3];return t.map((function(t,i){var e;return c.createElement("div",{className:Fe("line",l,"guideline","target","bold"),key:l+"TargetGuidline"+i,style:(e={},e[f]=r+"px",e[h]=-n+t+"px",e[d]=o+"px",e)})}))}function Un(t,e,r,n,o,c){var l=e[0],f=e[1],h=e[2],d=e[3];return t.map((function(t,i){var e,v=t.pos,m=t.size,element=t.element;return c.createElement("div",{className:Fe("line",l,"guideline",element?"bold":""),key:l+"Guidline"+i,style:(e={},e[f]=-r+v[o]+"px",e[h]=-n+v[o?0:1]+"px",e[d]=m+"px",e)})}))}function $n(t,e,r,n){var o=t.filter((function(t){var element=t.element,r=t.gap,n=t.type;return element&&r&&n===e})),c="vertical"===e?[0,1]:[1,0],l=c[0],f=c[1];return Tr(o.map((function(t,i){var e=t.pos,o=t.gap,c=t.gapGuidelines,h=t.sizes,d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(a,b){return Math.abs(a)-Math.abs(b)})),t[0]}(e[f]+h[f]-r[f],e[f]-r[f]-n[f]),v=Math.min(h[f],n[f]);d>0&&d>v?d=2*(d-v/2):d<0&&d<-v&&(d=2*(d+v/2));var m=(d>0?0:n[f])+d/2;return function(t,e,r,n,o,c,l){var f=Math.abs(c),h=o[e]+(c>0?n[0]:0);return t.filter((function(t){return t.pos[e]<=r[e]})).sort((function(t,r){var n=t.pos;return r.pos[e]-n[e]})).filter((function(t){var r=t.pos,n=t.sizes,o=r[e];return Er(o+n[e],1e-4)===Er(h-f,1e-4)&&(h=o,!0)})).map((function(t){var n=-r[e]+t.pos[e]+t.sizes[e];return Ge({},t,{gap:c,renderPos:e?[l,n]:[n,l]})}))}(c,l,r,n,e,o,m).concat(function(t,e,r,n,o,c,l){var f=Math.abs(c),h=o[e]+(c<0?n[e]:0);return t.filter((function(t){return t.pos[e]>r[e]})).sort((function(t,r){var n=t.pos,o=r.pos;return n[e]-o[e]})).filter((function(t){var r=t.pos,n=t.sizes,o=r[e];return Er(o,1e-4)===Er(h+f,1e-4)&&(h=o+n[e],!0)})).map((function(t){var n=-r[e]+t.pos[e]-f;return Ge({},t,{gap:c,renderPos:e?[l,n]:[n,l]})}))}(c,l,r,n,e,o,m))})))}function Kn(t,e,r,n,o,c){var l=n[0],f=n[1],h=n[2],d=n[3],v=t.props,m=v.snapDigit,y=void 0===m?0:m,x=v.isDisplaySnapDigit,E=void 0===x||x,S="vertical"===r?"horizontal":"vertical",M="vertical"===r?[0,1]:[1,0],w=M[0],D=M[1];return e.map((function(t,i){var e,r=t.renderPos,n=t.gap,v=Math.abs(n),m=E?parseFloat(v.toFixed(y)):0;return c.createElement("div",{className:Fe("line",l,"guideline","gap"),"data-size":m>0?o(m):"",key:S+"GapGuideline"+i,style:(e={},e[f]=r[w]+"px",e[h]=r[D]+"px",e[d]=v+"px",e)})}))}function Zn(t,e,r,n,o){var c=Dn(t,e,r),l=c.vertical,f=l.isBound,h=l.pos,d=c.horizontal,v=d.isBound,m=d.pos;f&&n.indexOf(h)<0&&n.push(h),v&&o.indexOf(m)<0&&o.push(m);var y=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var r=t.getRect(),n=r.pos1,o=r.pos2,c=r.pos3,l=r.pos4,f=en([n,o,c,l],[0,0]),h=e.left,d=e.top,v=e.width,m=e.height,y=[[h,d],[h,d+m]],x=[[h,d],[h+v,d]],E=[[h+v,d],[h+v,d+m]],S=[[h,d+m],[h+v,d+m]],M=[],w=[],D={top:!1,bottom:!1,left:!1,right:!1};return[[n,o],[o,l],[l,c],[c,n]].forEach((function(line){var t=gn(f,line),e=t.horizontal,r=t.vertical,n=yn(line,x,r,1),o=yn(line,S,r,1),c=yn(line,y,e,1),l=yn(line,E,e,1);n.isBound&&!D.top&&(M.push(d),D.top=!0),o.isBound&&!D.bottom&&(M.push(d+m),D.bottom=!0),c.isBound&&!D.left&&(w.push(h),D.left=!0),l.isBound&&!D.right&&(w.push(h+v),D.right=!0)})),{horizontal:M,vertical:w}}(t),x=y.vertical,E=y.horizontal;n.push.apply(n,x.filter((function(t){return n.indexOf(t)<0}))),o.push.apply(o,E.filter((function(t){return o.indexOf(t)<0})))}var Jn={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,e){var r=t.state,n=r.top,o=r.left,c=r.pos1,l=r.pos2,f=r.pos3,h=r.pos4,d=r.snapRenderInfo,v=r.targetClientRect,m=r.containerClientRect,y=r.is3d,x=r.rootMatrix;if(!d||!Bn(t,""))return[];var E=y?4:3,S=Math.min(c[0],l[0],f[0],h[0]),M=Math.min(c[1],l[1],f[1],h[1]),w=Rn(x,m,E),D=Ar(x,[v.left-w[0],v.top-w[1]],E),C=D[0],O=D[1],P=t.props,R=P.snapThreshold,z=void 0===R?5:R,B=P.snapDigit,_=void 0===B?0:B,T=P.isDisplaySnapDigit,G=void 0===T||T,A=P.snapDistFormat,N=void 0===A?function(t){return t}:A,j=xr(t.state),I=ar(j),k=I.width,W=I.height,X=I.top,Y=I.left,H=I.bottom,L=I.right,F=[],V=[],U=[],$=[],K=[];if(!d.request){if(d.direction&&K.push(function(t,e,r){var n=[];if(r[0]&&r[1])n=[r,[-r[0],r[1]],[r[0],-r[1]]].map((function(t){return en(e,t)}));else if(r[0]||r[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],r].map((function(t){return en(e,t)})):(n=tn(e,r)).length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var o=[e[0],e[1],e[3],e[2],e[0]],i=0;i<4;++i)n.push(o[i]),n.push([(o[i][0]+o[i+1][0])/2,(o[i][1]+o[i+1][1])/2]);return fn(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]})),!0,1)}(t,j,d.direction)),d.snap){var rect=ar(j);d.center&&(rect.middle=(rect.top+rect.bottom)/2,rect.center=(rect.left+rect.right)/2),K.push(function(t,rect,e,r){var n=t.props.snapCenter&&e,o=["left","right"],c=["top","bottom"];return n&&(o.push("center"),c.push("middle")),o=o.filter((function(t){return t in rect})),c=c.filter((function(t){return t in rect})),fn(t,o.map((function(t){return rect[t]})),c.map((function(t){return rect[t]})),n,r)}(t,rect,!0,1))}K.forEach((function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;F.push.apply(F,e.map((function(t){return t.pos}))),V.push.apply(V,r.map((function(t){return t.pos}))),U.push.apply(U,Hn(e)),$.push.apply($,Hn(r))}))}Zn(t,[Y,L],[X,H],F,V);var Z=qn($,C,k,0),J=qn(U,O,W,1),Q=["horizontal","left","top","width"],tt=["vertical","top","left","height"],et=$n(U,"vertical",[o,n],[k,W]),nt=$n($,"horizontal",[o,n],[k,W]),it=U.concat($);return Cr(t,"onSnap",{guidelines:it.filter((function(t){return!t.element})),elements:_r(it.filter((function(t){return t.element})),(function(t){return t.element})),gaps:et.concat(nt)},!0),Kn(t,et,"vertical",Q,N,e).concat(Kn(t,nt,"horizontal",tt,N,e),Fn(Z,Q,S,C,k,n,z,G,_,0,N,e),Fn(J,tt,M,O,W,o,z,G,_,1,N,e),Vn(V,Q,S,n,k,e),Vn(F,tt,M,o,W,e),Un($,Q,o,n,0,e),Un(U,tt,n,o,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},zn(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return cn(t)||ii(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,zn(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,zn(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},Qn={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,e){var r=t.props.throttleDragRotate,n=t.state,o=n.dragInfo,c=n.beforeOrigin;if(r&&o){var l=o.dist;if(l[0]||l[1]){var f=cr(l),h=Lt(l,[0,0]);return e.createElement("div",{className:Fe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:f+"px",transform:"translate("+c[0]+"px, "+c[1]+"px) rotate("+h+"rad)"}})}}},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,o=e.parentDragger,c=t.state,l=c.targetTransform,f=c.target;if(c.dragger)return!1;c.dragger=o||t.targetDragger;var style=window.getComputedStyle(f);r.datas={},r.left=parseFloat(style.left||"")||0,r.top=parseFloat(style.top||"")||0,r.bottom=parseFloat(style.bottom||"")||0,r.right=parseFloat(style.right||"")||0,r.transform=l,r.startTranslate=[0,0],Zr(t,{datas:r}),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,function(t,e){e.absolutePoses=xr(t.state)}(t,r);var h=Dr(t,e,{set:function(t){r.startTranslate=t}});return!1!==(n||Cr(t,"onDragStart",h))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(c.dragger=null,r.isPinch=!1),!!r.isDrag&&h},drag:function(t,e){var r=e.datas,n=e.parentEvent,o=e.parentFlag,c=e.isPinch,l=e.isRequest,f=e.distX,h=e.distY,d=r.isDrag,v=r.prevDist,m=r.prevBeforeDist,y=r.transform,x=r.startTranslate;if(d){var E=t.props,S=E.parentMoveable,M=n?0:E.throttleDrag||0,w=n?0:E.throttleDragRotate||0,D=!1,C=0;if(w>0&&(f||h)){var O=Er(180*Lt([0,0],[f,h])/Math.PI,w),P=cr([f,h]);C=O*Math.PI/180,f=P*Math.cos(C),h=P*Math.sin(C)}if(!c&&!n&&!o&&(f||h)){var R=Yn(t,f,h,w,l,r),z=R[0],B=R[1],_=z.isSnap,T=z.isBound,G=z.offset,A=B.isSnap,N=B.isBound;D=_||A||T||N,f+=G,h+=B.offset}r.passDeltaX=f-(r.passDistX||0),r.passDeltaY=h-(r.passDistY||0),r.passDistX=f,r.passDistY=h;var j=Zt(Jr({datas:r,distX:f,distY:h},!0),x),I=Zt(Jr({datas:r,distX:f,distY:h},!1),x);w||D||(Sr(I,M),Sr(j,M));var k=Jt(j,x),W=Jt(I,x),X=Jt(W,v),Y=Jt(k,m);r.prevDist=W,r.prevBeforeDist=k;var H=r.left+k[0],L=r.top+k[1],F=r.right-k[0],V=r.bottom-k[1],U=y+" translate("+W[0]+"px, "+W[1]+"px)";if(t.state.dragInfo.dist=n?[0,0]:W,n||S||!X.every((function(t){return!t}))||!Y.some((function(t){return!t}))){var $=Dr(t,e,{transform:U,dist:W,delta:X,translate:I,beforeDist:k,beforeDelta:Y,beforeTranslate:j,left:H,top:L,right:F,bottom:V,isPinch:c});return!n&&Cr(t,"onDrag",$),$}}},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas,o=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,n.isDrag)return n.isDrag=!1,!r&&Cr(t,"onDragEnd",Dr(t,e,{isDrag:o})),o},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var l=$r(t,this,"dragStart",[n||0,o||0],e,!1),f=Cr(t,"onDragGroupStart",Ge({},c,{targets:t.props.targets,events:l}));return r.isDrag=!1!==f,!!r.isDrag&&c},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,e),n=e.datas,o=$r(t,this,"drag",[n.passDeltaX,n.passDeltaY],e,!1);if(r){var c=Ge({targets:t.props.targets,events:o},r);return Cr(t,"onDragGroup",c),c}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),$r(t,this,"dragEnd",[0,0],e,!1),Cr(t,"onDragGroupEnd",Dr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(t){var e={},rect=t.getRect(),r=0,n=0;return{isControl:!1,requestStart:function(t){return{datas:e}},request:function(t){return"x"in t?r=t.x-rect.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?n=t.y-rect.top:"deltaY"in t&&(n+=t.deltaY),{datas:e,distX:r,distY:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function ti(t,e,r,n,o,rect){var c=t.state.is3d?4:3,l=ir(t.state.rootMatrix,o,c),f=Zt([rect.left,rect.top],l);e.startAbsoluteOrigin=f,e.prevDeg=Lt(f,[r,n])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function ei(t,e,r,n,o,c){var l=r.prevDeg,f=c+n,h=Xn(t,e,r.origin,n);return r.prevDeg=h,[o*(h-l),h,f]}function ri(t,e,r,n,o,c,l,f){var h=r.prevDeg,d=r.prevSnapDeg,v=r.startDeg,m=r.loop;h>n&&h>270&&n<90?++r.loop:h<n&&h<90&&n>270&&--r.loop;var y=r.loop,x=360*m+d-v+c,E=360*y+n-v+c;r.prevDeg=E-360*y+v-c;var S=o*((E=Er(E,l))-c);return f&&(E=(S=Xn(t,e,r.origin,S))/o+c),r.prevSnapDeg=E-360*y+v-c,[o*(E-x),S,E]}function ni(t,e,r,n,o,c,l,f){return ri(t,e,r,Lt(r.startAbsoluteOrigin,[o,c])/Math.PI*180,n,l,f,!0)}function ii(t){return!!t.isRequest||k(t.inputEvent.target,Fe("rotation"))}var oi={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var r=t.props,n=r.rotatable,o=r.rotationPosition;if(!n)return null;var c=t.state,l=c.renderPoses,f=c.direction,h=function(t,e){var r=e[0],n=e[1],o=e[2],c=e[3];return"left"===t?[o,r]:"right"===t?[n,c]:"bottom"===t?[c,o]:[r,n]}(o,l),d=dr(h,f);return e.createElement("div",{key:"rotation",className:Fe("line rotation-line"),style:{transform:"translate(-50%) translate("+(h[0][0]+h[1][0])/2+"px, "+(h[0][1]+h[1][1])/2+"px) rotate("+d+"rad)"}},e.createElement("div",{className:Fe("control","rotation")}))},dragControlCondition:ii,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,o=e.clientY,c=e.parentRotate,l=e.parentFlag,f=e.isPinch,h=e.isRequest,d=t.state,v=d.target,m=d.left,y=d.top,x=d.origin,E=d.beforeOrigin,S=d.direction,M=d.beforeDirection,w=d.targetTransform;if(!h&&!v)return!1;var rect=t.getRect();if(r.rect=rect,r.transform=w,r.left=m,r.top=y,h||f||l){var D=c||0;r.beforeInfo={origin:rect.beforeOrigin,prevDeg:D,startDeg:D,prevSnapDeg:D,loop:0},r.afterInfo={origin:rect.origin,prevDeg:D,startDeg:D,prevSnapDeg:D,loop:0}}else{r.beforeInfo={origin:rect.beforeOrigin},r.afterInfo={origin:rect.origin};var C=vr(t.controlBox.getElement());ti(t,r.beforeInfo,n,o,E,C),ti(t,r.afterInfo,n,o,x,C)}r.direction=S,r.beforeDirection=M,r.startRotate=0,r.datas={};var O=Dr(t,e,{set:function(t){r.startRotate=t}}),P=Cr(t,"onRotateStart",O);return r.isRotate=!1!==P,t.state.snapRenderInfo={request:e.isRequest},!!r.isRotate&&O},dragControl:function(t,e){var r,n,o,c,l,f,h=e.datas,d=e.clientX,v=e.clientY,m=e.parentRotate,y=e.parentFlag,x=e.isPinch,E=h.direction,S=h.beforeDirection,M=h.beforeInfo,w=h.afterInfo,D=h.isRotate,C=h.startRotate,rect=h.rect;if(D){var O,P,R,z,B,_,T=t.props,G=T.throttleRotate,A=void 0===G?0:G,N=T.parentMoveable;if("parentDist"in e){var j=e.parentDist;O=(r=ei(t,rect,w,j,E,C))[0],P=r[1],R=r[2],z=(n=ei(t,rect,M,j,E,C))[0],B=n[1],_=n[2]}else x||y?(O=(o=ri(t,rect,w,m,E,C,A))[0],P=o[1],R=o[2],z=(c=ri(t,rect,M,m,E,C,A))[0],B=c[1],_=c[2]):(O=(l=ni(t,rect,w,E,d,v,C,A))[0],P=l[1],R=l[2],z=(f=ni(t,rect,M,S,d,v,C,A))[0],B=f[1],_=f[2]);if(O||z||N){var I=Dr(t,e,{delta:O,dist:P,rotate:R,beforeDist:B,beforeDelta:z,beforeRotate:_,transform:h.transform+" rotate("+P+"deg)",isPinch:!!x});return Cr(t,"onRotate",I),I}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isRotate&&(r.isRotate=!1,Cr(t,"onRotateEnd",Dr(t,e,{isDrag:n})),n)},dragGroupControlCondition:ii,dragGroupControlStart:function(t,e){var r=e.datas,n=e.inputEvent,o=t.state,c=o.left,l=o.top,f=o.beforeOrigin,h=this.dragControlStart(t,e);if(!h)return!1;h.set(t.rotation);var d=Kr(t,this,"dragControlStart",r,Ge({},e,{parentRotate:0}),(function(t,e,r){var o=t.state,h=o.left,d=o.top,v=o.beforeOrigin,m=Zt(Jt([h,d],[c,l]),Jt(v,f));e.prevClient=m,r.dragStart=Qn.dragStart(t,(new Ur).dragStart(m,n))})),v=Cr(t,"onRotateGroupStart",Ge({},h,{targets:t.props.targets,events:d}));return r.isRotate=!1!==v,!!r.isRotate&&h},dragGroupControl:function(t,e){var r=e.inputEvent,n=e.datas;if(n.isRotate){var o=this.dragControl(t,e);if(o){var c=o.beforeDist,l=o.beforeDelta/180*Math.PI,f=Kr(t,this,"dragControl",n,Ge({},e,{parentRotate:c}),(function(t,n,o,i){var c=n.prevClient,f=c[0],h=c[1],d=te([f,h],l),v=d[0],m=d[1],y=[v-f,m-h];n.prevClient=[v,m];var x=Qn.drag(t,Vr(t.state,y,r,!!e.isPinch,!1));o.drag=x}));t.rotation=o.beforeRotate;var h=Ge({targets:t.props.targets,events:f,set:function(e){t.rotation=e}},o);return Cr(t,"onRotateGroup",h),h}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isRotate)return this.dragControlEnd(t,e),Kr(t,this,"dragControlEnd",n,e),Cr(t,"onRotateGroupEnd",Dr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(){var t={},e=0;return{isControl:!0,requestStart:function(e){return{datas:t}},request:function(r){return e+=r.deltaRotate,{datas:t,parentDist:e}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function ai(t,e,r){var n=t.state,o=n.renderPoses,c=n.rotation,l=t.props.renderDirections,f=void 0===l?e:l,h={};return f.forEach((function(t){h[t]=!0})),f.map((function(t){var e=Le[t];if(!e||!h[t])return null;var n=(Er(c/Math.PI*180,15)+qe[t])%180;return r.createElement("div",{className:Fe("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:fr.apply(void 0,[c].concat(e.map((function(t){return o[t]}))))})}))}function si(t,e){return ai(t,He,e)}function ui(t,e){return ai(t,["nw","ne","sw","se"],e)}var ci={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var r=t.props,n=r.resizable,o=r.edge;if(n)return o?ui(t,e):si(t,e)},dragControlCondition:cn,dragControlStart:function(t,e){var r,n=e.inputEvent,o=e.isPinch,c=e.parentDirection,l=e.datas,f=e.parentFlag,h=c||(o?[0,0]:mr(n.target)),d=t.state,v=d.target,m=d.width,y=d.height;if(!h||!v)return!1;!o&&Zr(t,{datas:l}),l.datas={},l.direction=h,l.startOffsetWidth=m,l.startOffsetHeight=y,l.prevWidth=0,l.prevHeight=0,r=function(t){var style=window.getComputedStyle(t);return[parseFloat(style.width),parseFloat(style.height)]}(v),l.startWidth=r[0],l.startHeight=r[1];var x=[Math.max(0,m-l.startWidth),Math.max(0,y-l.startHeight)];if(l.minSize=x,l.maxSize=[1/0,1/0],!f){var style=window.getComputedStyle(v);l.minSize=Zt([parseFloat(style.minWidth)||0,parseFloat(style.minHeight)||0],x),l.maxSize=Zt([parseFloat(style.maxWidth)||1/0,parseFloat(style.maxHeight)||1/0],x)}l.transformOrigin=t.props.transformOrigin,l.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var r=t.props.baseDirection,n=void 0===r?[-1,-1]:r;return[e[0]?e[0]:-1*n[0],e[1]?e[1]:-1*n[1]]}(t,h),l.fixedPosition=un(t,l.startDirection),l.fixedOriginalPosition=un(t,h);var E=Dr(t,e,{direction:h,set:function(t){var e=t[0],r=t[1];l.startWidth=e,l.startHeight=r},setOrigin:function(t){l.transformOrigin=t},dragStart:Qn.dragStart(t,(new Ur).dragStart([0,0],n))});return!1!==Cr(t,"onResizeStart",E)&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),!!l.isResize&&E},dragControl:function(t,e){var r,n=e.datas,o=e.distX,c=e.distY,l=e.parentFlag,f=e.isPinch,h=e.parentDistance,d=e.parentScale,v=e.inputEvent,m=e.parentKeepRatio,y=e.dragClient,x=e.parentDist,E=e.isRequest,S=n.direction,M=n.isResize,w=n.transformOrigin;if(M){var D=n.startWidth,C=n.startHeight,O=n.startOffsetWidth,P=n.startOffsetHeight,R=n.prevWidth,z=n.prevHeight,B=n.minSize,_=n.maxSize,T=t.props,G=T.throttleResize,A=void 0===G?0:G,N=T.parentMoveable,j=S;S[0]||S[1]||(j=[1,1]);var I=t.props.keepRatio||m,k=j[0]||!j[1],W=k?P/O:O/P,X=I||l?S:n.startDirection,Y=y,H=0,L=0;if(y||(Y=!l&&f?un(t,[0,0]):I?n.fixedOriginalPosition:n.fixedPosition),x)H=x[0],L=x[1];else if(d)H=(d[0]-1)*O,L=(d[1]-1)*P;else if(f)h&&(H=h,L=h*P/O);else{var F=Jr({datas:n,distX:o,distY:c});if(H=j[0]*F[0],L=j[1]*F[1],I&&O&&P){var V=Lt([0,0],F),U=Lt([0,0],j),$=Lt([0,0],[O,P]),K=cr([H,L]),Z=Math.cos(V-U)*K;j[0]?j[1]?(H=Math.cos($)*Z,L=Math.sin($)*Z):L=Rr(H=Z,k,W):H=zr(L=Z,k,W)}}var J=j[0]||I?Math.max(O+H,1e-7):O,Q=j[1]||I?Math.max(P+L,1e-7):P;I&&O&&P&&(Q=J*P/O);var tt=[0,0];if(f||(tt=function(t,e,r,n,o,c,l){if(!Bn(t,"resizable"))return[0,0];var f=t.state,h=f.matrix,d=f.is3d;return Wn(t,(function(t,c){return Tn(h,e+t,r+c,o,n,d)}),e,r,n,o,c,l)}(t,J,Q,S,n.fixedOriginalPosition,E,n)),x&&(!x[0]&&(tt[0]=0),!x[1]&&(tt[1]=0)),I){j[0]&&j[1]&&tt[0]&&tt[1]&&(Math.abs(tt[0])>Math.abs(tt[1])?tt[1]=0:tt[0]=0);var et=!tt[0]&&!tt[1];et&&(k?J=Er(J,A):Q=Er(Q,A)),j[0]&&!j[1]||tt[0]&&!tt[1]||et&&k?Q=Rr(J+=tt[0],k,W):(!j[0]&&j[1]||!tt[0]&&tt[1]||et&&!k)&&(J=zr(Q+=tt[1],k,W))}else J+=tt[0],Q+=tt[1],tt[0]||(J=Er(J,A)),tt[1]||(Q=Er(Q,A));J=(r=function(t,e,r,n){if(!n)return t.map((function(t,i){return Math.min(r[i],Math.max(t,e[i]))}));var o=t[0],c=t[1],l=Ir(t,e,!1),f=l[0],h=l[1],d=Ir(t,r,!0),v=d[0],m=d[1];return o<f||c<h?(o=f,c=h):(o>v||c>m)&&(o=v,c=m),[o,c]}([J,Q],B,_,I))[0],Q=r[1];var nt=[(H=(J=Math.round(J))-O)-R,(L=(Q=Math.round(Q))-P)-z];if(n.prevWidth=H,n.prevHeight=L,N||!nt.every((function(t){return!t}))){var it=sn(t,J,Q,X,Y,w),ot=Dr(t,e,{width:D+H,height:C+L,offsetWidth:J,offsetHeight:Q,direction:S,dist:[H,L],delta:nt,isPinch:!!f,drag:Qn.drag(t,Vr(t.state,it,v,!!f,!1))});return Cr(t,"onResize",ot),ot}}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,o=r.startOffsetWidth,c=r.startOffsetHeight,l=r.prevWidth,f=r.prevHeight;if(n){var h=t.state,d=h.width-(o+l),v=h.height-(c+f),m=Math.abs(d)>3,y=Math.abs(v)>3;return m&&(r.startWidth+=d,r.startOffsetWidth+=d,r.prevWidth+=d),y&&(r.startHeight+=v,r.startOffsetHeight+=v,r.prevHeight+=v),m||y?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isResize&&(r.isResize=!1,Cr(t,"onResizeEnd",Dr(t,e,{isDrag:n})),n)},dragGroupControlCondition:cn,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var o=n.direction,c=un(t,o),l=Kr(t,this,"dragControlStart",r,(function(r,n){var l=un(r,o),f=Qt(re(-t.rotation/180*Math.PI,3),[l[0]-c[0],l[1]-c[1],1],3),h=f[0],d=f[1];return n.originalX=h,n.originalY=d,e})),f=Ge({},n,{targets:t.props.targets,events:l}),h=Cr(t,"onResizeGroupStart",f);return r.isResize=!1!==h,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=this.dragControl(t,e);if(n){var o=n.offsetWidth,c=n.offsetHeight,l=n.dist,f=t.props.keepRatio,h=[o/(o-l[0]),c/(c-l[1])],d=un(t,r.direction),v=Kr(t,this,"dragControl",r,(function(r,n){var o=Qt(re(t.rotation/180*Math.PI,3),[n.originalX*h[0],n.originalY*h[1],1],3),c=o[0],l=o[1];return Ge({},e,{parentDist:null,parentScale:h,dragClient:Zt(d,[c,l]),parentKeepRatio:f})})),m=Ge({targets:t.props.targets,events:v},n);return Cr(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isResize)return this.dragControlEnd(t,e),Kr(t,this,"dragControlEnd",n,e),Cr(t,"onResizeGroupEnd",Dr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(t){var e={},r=0,n=0,rect=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-rect.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-rect.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},fi={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var r=t.props,n=r.resizable,o=r.scalable,c=r.edge;if(!n&&o)return c?ui(t,e):si(t,e)},dragControlCondition:cn,dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,o=e.inputEvent,c=e.parentDirection||(n?[0,0]:mr(o.target)),l=t.state,f=l.width,h=l.height,d=l.targetTransform,v=l.target;if(!c||!v)return!1;n||Zr(t,{datas:r}),r.datas={},r.transform=d,r.prevDist=[1,1],r.direction=c,r.width=f,r.height=h,r.startScale=[1,1],r.fixedPosition=un(t,c);var m=Dr(t,e,{direction:c,set:function(t){r.startScale=t},dragStart:Qn.dragStart(t,(new Ur).dragStart([0,0],o))});return!1!==Cr(t,"onScaleStart",m)&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:c}),!!r.isScale&&m},dragControl:function(t,e){var r=e.datas,n=e.distX,o=e.distY,c=e.parentScale,l=e.parentDistance,f=e.parentKeepRatio,h=e.parentFlag,d=e.isPinch,v=e.inputEvent,m=e.dragClient,y=e.parentDist,x=e.isRequest,E=r.prevDist,S=r.direction,M=r.width,w=r.height,D=r.transform,C=r.isScale,O=r.startScale;if(!C)return!1;var P=t.props,z=P.throttleScale,B=P.parentMoveable,_=S;S[0]||S[1]||(_=[1,1]);var T=t.props.keepRatio||f,G=t.state,A=_[0]||!_[1],N=M*O[0],j=w*O[1],I=A?j/N:N/j,k=1,W=1,X=m;if(m||(X=!h&&d?un(t,[0,0]):r.fixedPosition),y)k=(M+y[0])/M,W=(w+y[1])/w;else if(c)k=c[0],W=c[1];else if(d)l&&(k=(M+l)/M,W=(w+l*w/M)/w);else{var Y=Jr({datas:r,distX:n,distY:o}),H=_[0]*Y[0],L=_[1]*Y[1];if(T&&M&&w){var F=Lt([0,0],Y),V=Lt([0,0],_),U=Lt([0,0],[N,j]),$=cr([H,L]),K=Math.cos(F-V)*$;_[0]?_[1]?(H=Math.cos(U)*K,L=Math.sin(U)*K):L=Rr(H=K,A,I):H=zr(L=K,A,I)}k=(M+H)/M,W=(w+L)/w}k=_[0]||T?k*O[0]:O[0],W=_[1]||T?W*O[1]:O[1],0===k&&(k=1e-9*(E[0]>0?1:-1)),0===W&&(W=1e-9*(E[1]>0?1:-1));var Z=[k/O[0],W/O[1]],J=[k,W];if(!d&&t.props.groupable){var Q=(G.snapRenderInfo||{}).direction;R(Q)&&(Q[0]||Q[1])&&(G.snapRenderInfo={direction:S,request:e.isRequest})}var tt=[0,0];if(d||(tt=function(t,e,r,n,o,c){var l=c.width,f=c.height;if(!Bn(t,"scalable"))return[0,0];var h=c.is3d,d=Wn(t,(function(t,o){return Tn(an(c,Zt(e,[t/l,o/f])),l,f,n,r,h)}),l,f,r,n,o,c);return[d[0]/l,d[1]/f]}(t,Z,S,r.fixedPosition,x,r)),T){_[0]&&_[1]&&tt[0]&&tt[1]&&(Math.abs(tt[0])>Math.abs(tt[1])?tt[1]=0:tt[0]=0);var et=!tt[0]&&!tt[1];if(et&&(A?Z[0]=Er(Z[0]*O[0],z)/O[0]:Z[1]=Er(Z[1]*O[1],z)/O[1]),_[0]&&!_[1]||tt[0]&&!tt[1]||et&&A){Z[0]+=tt[0];var nt=Rr(M*Z[0]*O[0],A,I);Z[1]=nt/w/O[1]}else if(!_[0]&&_[1]||!tt[0]&&tt[1]||et&&!A){Z[1]+=tt[1];var it=zr(w*Z[1]*O[1],A,I);Z[0]=it/M/O[0]}}else Z[0]+=tt[0],Z[1]+=tt[1],tt[0]||(Z[0]=Er(Z[0]*O[0],z)/O[0]),tt[1]||(Z[1]=Er(Z[1]*O[1],z)/O[1]);0===Z[0]&&(Z[0]=1e-9*(E[0]>0?1:-1)),0===Z[1]&&(Z[1]=1e-9*(E[1]>0?1:-1));var ot,at,st=[Z[0]/E[0],Z[1]/E[1]];if(at=O,J=[(ot=Z)[0]*at[0],ot[1]*at[1]],r.prevDist=Z,k===E[0]&&W===E[1]&&!B)return!1;var ut=function(t,e,r,n){var o=t.state,c=o.is3d,l=o.left,f=o.top,h=o.width,d=o.height,v=c?4:3,m=t.props.groupable,y=m?l:0,x=m?f:0;return Jt(nn(n,an(t.state,e),h,d,v,r),[y,x])}(t,st,S,X),ct=Dr(t,e,{scale:J,direction:S,dist:Z,delta:st,transform:D+" scale("+k+", "+W+")",isPinch:!!d,drag:Qn.drag(t,Vr(t.state,ut,v,d,!1))});return Cr(t,"onScale",ct),ct},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isScale&&(r.isScale=!1,Cr(t,"onScaleEnd",Dr(t,e,{isDrag:n})),n)},dragGroupControlCondition:cn,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var o=n.direction,c=un(t,o),l=Kr(t,this,"dragControlStart",r,(function(r,n){var l=un(r,o),f=Qt(re(-t.rotation/180*Math.PI,3),[l[0]-c[0],l[1]-c[1],1],3),h=f[0],d=f[1];return n.originalX=h,n.originalY=d,e})),f=Ge({},n,{targets:t.props.targets,events:l}),h=Cr(t,"onScaleGroupStart",f);return r.isScale=!1!==h,!!r.isScale&&f},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){var n=this.dragControl(t,e);if(n){var o=t.props.keepRatio,c=n.scale,l=un(t,r.direction),f=Kr(t,this,"dragControl",r,(function(r,n){var f=Qt(re(t.rotation/180*Math.PI,3),[n.originalX*c[0],n.originalY*c[1],1],3),h=f[0],d=f[1];return Ge({},e,{parentDist:null,parentScale:c,parentKeepRatio:o,dragClient:Zt(l,[h,d])})})),h=Ge({targets:t.props.targets,events:f},n);return Cr(t,"onScaleGroup",h),h}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isScale)return this.dragControlEnd(t,e),Kr(t,this,"dragControlEnd",n,e),Cr(t,"onScaleGroupEnd",Dr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(){var t={},e=0,r=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function pi(t,e){return t.map((function(t,i){return r=t,n=e[i],(r*(c=2)+n*(o=1))/(o+c);var r,n,o,c}))}function hi(t,e,r){var n=Lt(t,e),o=Lt(t,r)-n;return o>=0?o:o+2*Math.PI}var di={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var r=t.props,n=r.resizable,o=r.scalable,c=r.warpable;if(!n&&!o&&c){var l=t.state,f=l.pos1,h=l.pos2,d=l.pos3,v=l.pos4,m=pi(f,h),y=pi(h,f),x=pi(f,d),E=pi(d,f),S=pi(d,v),M=pi(v,d),w=pi(h,v),D=pi(v,h);return[e.createElement("div",{className:Fe("line"),key:"middeLine1",style:lr(m,S)}),e.createElement("div",{className:Fe("line"),key:"middeLine2",style:lr(y,M)}),e.createElement("div",{className:Fe("line"),key:"middeLine3",style:lr(x,w)}),e.createElement("div",{className:Fe("line"),key:"middeLine4",style:lr(E,D)})].concat(si(t,e))}},dragControlCondition:function(t){return!t.isRequest&&k(t.inputEvent.target,Fe("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,o=t.props.target,c=mr(n.target);if(!c||!o)return!1;var l=t.state,f=l.transformOrigin,h=l.is3d,d=l.targetTransform,v=l.targetMatrix,m=l.width,y=l.height,x=l.left,E=l.top;return r.datas={},r.targetTransform=d,r.warpTargetMatrix=h?v:Ft(v,3,4),r.targetInverseMatrix=Xt(Yt(r.warpTargetMatrix,4),3,4),r.direction=c,r.left=x,r.top=E,Zr(t,{datas:r}),r.poses=[[0,0],[m,0],[0,y],[m,y]].map((function(p){return Jt(p,f)})),r.nextPoses=r.poses.map((function(t){var e=t[0],n=t[1];return Qt(r.warpTargetMatrix,[e,n,0,1],4)})),r.startMatrix=ne(4),r.prevMatrix=ne(4),r.absolutePoses=xr(l),r.posIndexes=Qr(c),l.snapRenderInfo={request:e.isRequest,direction:c},!1!==Cr(t,"onWarpStart",Dr(t,e,{set:function(t){r.startMatrix=t}}))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,o=e.distX,c=e.distY,l=r.targetInverseMatrix,f=r.prevMatrix,h=r.isWarp,d=r.startMatrix,v=r.poses,m=r.posIndexes,y=r.absolutePoses;if(!h)return!1;if(Bn(t,"warpable")){var x=m.map((function(t){return y[t]}));x.length>1&&x.push([(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]);var E=jn(t,n,x.map((function(t){return[t[0]+o,t[1]+c]}))),S=E.horizontal,M=E.vertical;c-=S.offset,o-=M.offset}var w=Jr({datas:r,distX:o,distY:c},!0),D=r.nextPoses.slice();if(m.forEach((function(t){D[t]=Zt(D[t],w)})),!We.every((function(t){return e=t.map((function(i){return v[i]})),r=t.map((function(i){return D[i]})),n=hi(e[0],e[1],e[2]),o=hi(r[0],r[1],r[2]),c=Math.PI,!(n>=c&&o<=c||n<=c&&o>=c);var e,r,n,o,c})))return!1;var C=ae(v[0],v[1],v[2],v[3],D[0],D[1],D[2],D[3]);if(!C.length)return!1;var O=ee(Ut(l,C,4)),P=r.targetTransform+" matrix3d("+O.join(",")+")",R=$t(Yt(f,4),O,4);return r.prevMatrix=O,Cr(t,"onWarp",Dr(t,e,{delta:R,matrix:$t(d,O,4),multiply:$t,dist:O,transform:P})),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,Cr(t,"onWarpEnd",Dr(t,e,{isDrag:n})),n)}},gi=Fe("area"),vi=Fe("area-pieces"),mi=Fe("area-piece"),bi=Fe("avoid");function yi(t){var e=t.areaElement,r=t.state,n=r.width,o=r.height;!function(element,t){if(element.classList)element.classList.remove(t);else{var e=new RegExp("(\\s|^)"+t+"(\\s|$)");element.className=element.className.replace(e," ")}}(e,bi),e.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+o+"px"}function xi(t){return t.createElement("div",{key:"area_pieces",className:vi},t.createElement("div",{className:mi}),t.createElement("div",{className:mi}),t.createElement("div",{className:mi}),t.createElement("div",{className:mi}))}var Ei={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var r=t.props,n=r.target,o=r.dragArea,c=r.groupable,l=t.state,f=l.width,h=l.height,v=l.renderPoses;if(c)return[e.createElement("div",{key:"area",ref:d(t,"areaElement"),className:gi}),xi(e)];if(!n||!o)return[];var m=ae([0,0],[f,0],[0,h],[f,h],v[0],v[1],v[2],v[3]),y=m.length?"matrix3d("+ee(m).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:d(t,"areaElement"),className:gi,style:{top:"0px",left:"0px",width:f+"px",height:h+"px",transformOrigin:"0 0",transform:y}}),xi(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,o=e.clientY,c=e.inputEvent;if(!c)return!1;r.isDragArea=!1,r.inputTarget=c.target;var element,l,f=t.areaElement,h=t.state,d=h.moveableClientRect,v=h.renderPoses,m=h.rootMatrix,y=h.is3d,x=d.left,E=d.top,S=ar(v),M=S.left,w=S.top,D=S.width,C=S.height,O=Ar(m,[n-x,o-E],y?4:3),P=O[0],R=O[1],z=[{left:M,top:w,width:D,height:(R-=w)-10},{left:M,top:w,width:(P-=M)-10,height:C},{left:M,top:w+R+10,width:D,height:C-R-10},{left:M+P+10,top:w,width:D-P-10,height:C}],B=[].slice.call(f.nextElementSibling.children);return z.forEach((function(rect,i){B[i].style.cssText="left: "+rect.left+"px;top: "+rect.top+"px; width: "+rect.width+"px; height: "+rect.height+"px;"})),l=bi,(element=f).classList?element.classList.add(l):element.className+=" "+l,!0},drag:function(t,e){var r=e.datas;if(!e.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,yi(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var r=e.inputEvent,n=e.datas.isDragArea;n||yi(t);var o=t.state.target,c=r.target;if(!n&&!t.isMoveableElement(c)){var l=o.contains(c);Cr(t,"onClick",Dr(t,e,{isDouble:e.isDouble,inputTarget:c,isTarget:o===c,containsTarget:l}))}},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.isDragArea,o=e.datas;if(!r)return!1;n||yi(t);var c=o.inputTarget,l=r.target;if(!n&&!t.isMoveableElement(l)&&c!==l){var f=t.props.targets,h=f.indexOf(l),d=h>-1,v=!1;-1===h&&(v=(h=I(f,(function(t){return t.contains(l)})))>-1),Cr(t,"onClickGroup",Dr(t,e,{isDouble:e.isDouble,targets:f,inputTarget:l,targetIndex:h,isTarget:d,containsTarget:v}))}}},Si={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var r=t.state,n=r.beforeOrigin,o=r.rotation;return[e.createElement("div",{className:Fe("control","origin"),style:fr(o,n),key:"beforeOrigin"})]}};function Mi(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var wi={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(t,e){var r=t.props.scrollContainer,n=void 0===r?t.getContainer():r,o=new Oe;e.datas.dragScroll=o;var c=e.isControl?"controlDragger":"targetDragger",l=e.targets;o.on("scroll",(function(r){var n=r.container,o=r.direction,c=Dr(t,e,{scrollContainer:n,direction:o}),f=l?"onScrollGroup":"onScroll";l&&(c.targets=l),Cr(t,f,c)})).on("move",(function(r){var n=r.offsetX,o=r.offsetY;t[c].scrollBy(n,o,e.inputEvent,!1)})),o.dragStart(e,{container:n})},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,o=n.scrollContainer,c=void 0===o?t.getContainer():o,l=n.scrollThreshold,f=void 0===l?0:l,h=n.getScrollPosition,d=void 0===h?Mi:h;return r.drag(e,{container:c,threshold:f,getScrollPosition:function(t){return d({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Ge({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Ge({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Ge({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Ge({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Ge({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Ge({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Ge({},e,{targets:t.props.targets}))}},Di=[{name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Jn,Fr,Qn,oi,ci,fi,di,wi,Ei,{name:"padding",props:{padding:Object},render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=r.padding||{},o=n.left,c=void 0===o?0:o,l=n.top,f=void 0===l?0:l,h=n.right,d=void 0===h?0:h,v=n.bottom,m=void 0===v?0:v,y=t.state,x=y.renderPoses,E=[y.pos1,y.pos2,y.pos3,y.pos4],S=[];return c>0&&S.push([0,2]),f>0&&S.push([0,1]),d>0&&S.push([1,3]),m>0&&S.push([2,3]),S.map((function(t,i){var r=t[0],n=t[1],o=ae([0,0],[100,0],[0,100],[100,100],E[r],E[n],x[r],x[n]);if(o.length)return e.createElement("div",{key:"padding"+i,className:Fe("padding"),style:{transform:"matrix3d("+ee(o).join(",")+")"}})}))}},Si],Ci={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(t,e){var r=t.props.targets||[];t.moveables=[];var n=t.state,o={left:n.left,top:n.top};return r.map((function(r,i){return e.createElement(Lr,{key:"moveable"+i,ref:v(t,"moveables",i),target:r,origin:!1,parentMoveable:t,parentPosition:o})}))}};function Oi(t,e){return Math.max.apply(Math,t.map((function(t){var r=t[0],n=t[1],o=t[2],c=t[3];return Math.max(r[e],n[e],o[e],c[e])})))}function Pi(t,e){return Math.min.apply(Math,t.map((function(t){var r=t[0],n=t[1],o=t[2],c=t[3];return Math.min(r[e],n[e],o[e],c[e])})))}var Ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new Be,e.moveables=[],e.rotation=0,e}Te(e,t);var r=e.prototype;return r.updateEvent=function(t){var e=this.state,r=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=Wr(this,e.target,"Group"),this.controlDragger=Xr(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var n=!Br(t.container,r.container);n&&(e.container=r.container);var o=this.differ.update(r.targets),c=o.added,l=o.changed,f=o.removed;(n||c.length||l.length||f.length)&&this.updateRect()},r.checkUpdate=function(){this.updateAbles()},r.updateRect=function(t,e,r){var n;if(void 0===r&&(r=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var o=this.state,c=this.props,l=o.target||c.target;(!e||""!==t&&c.updateGroup)&&(this.rotation=c.defaultGroupRotate);var f=this.rotation,h=function(t,e){if(!t.length)return[0,0,0,0];var r=t.map((function(t){return xr(t.state)})),n=Xe,o=Xe,c=0,l=0,f=Er(e,1e-7);if(f%90){var h=e/180*Math.PI,d=Math.tan(h),v=-1/d,m=[Ye,Xe],y=[Ye,Xe];r.forEach((function(t){t.forEach((function(t){var e=t[1]-d*t[0],r=t[1]-v*t[0];m[0]=Math.max(m[0],e),m[1]=Math.min(m[1],e),y[0]=Math.max(y[0],r),y[1]=Math.min(y[1],r)}))})),m.forEach((function(t){y.forEach((function(e){var r=(e-t)/(d-v),c=d*r+t;n=Math.min(n,r),o=Math.min(o,c)}))}));var x=r.map((function(t){var e=t[0],r=t[1],n=t[2],o=t[3];return[te(e,-h),te(r,-h),te(n,-h),te(o,-h)]}));c=Oi(x,0)-Pi(x,0),l=Oi(x,1)-Pi(x,1)}else if(n=Pi(r,0),o=Pi(r,1),c=Oi(r,0)-n,l=Oi(r,1)-o,f%180){var E=c;c=l,l=E}return[n,o,c,l]}(this.moveables,f),d=h[0],v=h[1],m=h[2],y=h[3];l.style.cssText+="left:0px;top:0px;width:"+m+"px; height:"+y+"px;transform:rotate("+f+"deg)",o.width=m,o.height=y;var x=this.getContainer(),E=gr(this.controlBox.getElement(),l,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||x,o),S=[E.left,E.top];n=xr(E),E.pos1=n[0],E.pos2=n[1],E.pos3=n[2],E.pos4=n[3],E.origin=Zt(S,E.origin),E.beforeOrigin=Zt(S,E.beforeOrigin);var M=E.targetClientRect;M.top+=v-E.top-o.top,M.left+=d-E.left-o.left,this.updateState(Ge({},E,{left:d-E.left,top:v-E.top}),r)}},r.triggerEvent=function(e,r){if(e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r)},r.updateAbles=function(){t.prototype.updateAbles.call(this,this.props.ables.concat([Ci]),"Group")},e.defaultProps=Ge({},Lr.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),e}(Lr),zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Te(e,t);var r=e.prototype;return r.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,r=R(e);if(r&&e.length>1){var n=Ge({},this.props,{target:null,targets:e,ables:Di.concat([Ci],t)});return et(Ri,Ge({key:"group",ref:d(this,"moveable")},n))}var o=r?e[0]:e;return et(Lr,Ge({key:"single",ref:d(this,"moveable")},Ge({},this.props,{target:o,ables:Di.concat(t)})))},r.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},r.dragStart=function(t){this.moveable.dragStart(t)},r.isInside=function(t,e){return this.moveable.isInside(t,e)},r.hitTest=function(t){return this.moveable.hitTest(t)},r.updateRect=function(){this.moveable.updateRect()},r.updateTarget=function(){this.moveable.updateTarget()},r.isDragging=function(){return this.moveable.isDragging()},r.getRect=function(){return this.moveable.getRect()},r.request=function(t,e){return this.moveable.request(t,e)},r.destroy=function(){this.moveable.componentWillUnmount()},e}(pt),Bi=function(t,b){return(Bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function _i(t,b){function e(){this.constructor=t}Bi(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var Ti=function(){return(Ti=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};var Gi=function(t){function e(e){var r=t.call(this,e)||this;return r.state={},r.state=r.props,r}return _i(e,t),e.prototype.render=function(){return t=et(zi,Ti({ref:d(this,"moveable")},this.state)),e=this.state.parentElement,et(ht,{element:t,container:e});var t,e},e}(ft),Ai=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleDragRotate","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal","snapGap","isDisplaySnapDigit","snapDigit","zoom","triggerAblesSimultaneously","padding","snapDistFormat","dragTarget"],Ni=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","click","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd","snap"],ji=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"],Ii=function(t){function e(e,r){void 0===r&&(r={});var n=t.call(this)||this;n.tempElement=document.createElement("div");var o=Ti({container:e},r),c={};Ni.forEach((function(t){var e;c[(e="on "+t,e.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()})))]=function(e){return n.trigger(t,e)}})),bt(et(Gi,Ti({ref:d(n,"innerMoveable"),parentElement:e},o,c)),n.tempElement);var l=o.target;return R(l)&&l.length>1&&n.updateRect(),n}_i(e,t);var r=e.prototype;return r.setState=function(t,e){this.innerMoveable.setState(t,e)},r.destroy=function(){bt(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c}([m(ji,(function(t,e){t[e]||(t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.getMoveable();if(n&&n[e])return n[e].apply(n,t)})})),m(Ai,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var r;this.setState(((r={})[e]=t,r))},enumerable:!0,configurable:!0})}))],e)}(f);function ki(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function Wi(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ki(Object(source),!0).forEach((function(e){Xi(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ki(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Xi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Yi={};ji.forEach((function(t){Yi[t]=function(){var e;return(e=this.moveable)[t].apply(e,arguments)}}));var Hi=function(t,e,r,n,o,c,l,f){var h,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=r,d._compiled=!0),n&&(d.functional=!0),c&&(d._scopeId="data-v-"+c),l?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},d._ssrRegister=h):o&&(h=f?function(){o.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:o),h)if(d.functional){d._injectStyles=h;var v=d.render;d.render=function(t,e){return h.call(e),v(t,e)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,h):[h]}return{exports:t,options:d}}({name:"Moveable",inheritAttrs:!1,props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,snapThreshold:Number,snapDigit:Number,isDisplaySnapDigit:Boolean,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,defaultGroupRotate:Number,scrollable:Boolean,scrollContainer:[HTMLElement,SVGElement],scrollThreshold:Number,getScrollPosition:Function,warpable:Boolean,renderDirections:Array,rotatable:Boolean,rotationPosition:String,throttleRotate:Number,pinchable:[Boolean,Array],scalable:Boolean,throttleScale:Number,keepRatio:Boolean,resizable:Boolean,throttleResize:Number,baseDirection:Array,draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,dragTarget:[HTMLElement,SVGElement],container:{type:[HTMLElement,SVGElement],default:function(){return document.body}},rootContainer:HTMLElement,dragArea:Boolean,origin:Boolean,zoom:Number,transformOrigin:[Array,String],edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,padding:Object},methods:Yi,mounted:function(){var t=this;this.moveable=new Ii(this.$props.container,Wi(Wi({},this.$props),{},{target:this.$el})),Ni.forEach((function(e){var r=e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();t.moveable.on(e,t.$emit.bind(t,r)),t.moveable.on(e,t.$emit.bind(t,e))})),window.addEventListener("resize",this.updateRect,{passive:!0})},watch:Wi({},Ai.reduce((function(t,e){var r;return t[e]=(r=e,{handler:function(t){this.moveable[r]!==t&&(this.moveable[r]=t)},deep:!0}),t}),{})),beforeDestroy:function(){window.removeEventListener("resize",this.updateRect),this.moveable.destroy()}},(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)}),[],!1,null,null,null).exports;e.default=Hi}}).default}}]);